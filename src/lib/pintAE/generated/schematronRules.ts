// Auto-generated by scripts/import-pint-ae-resources.mjs
export const PINT_AE_SCHEMATRON_RULES = [
  {
    "id": "ibr-010-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"PAS\") or (cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID=\"PAS\" and cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName  and matches(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName, \"^(AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|CV|KH|CM|CA|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|SZ|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|MK|RO|RU|RW|RE|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW)$\"))",
    "message": "[ibr-010-ae]-Passport issuing country code (BTAE-19) MUST be there when Buyer legal registration identifier type (BTAE-16) is 'Passport'",
    "references": [
      "BTAE-19",
      "BTAE-16"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-101-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\" and cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\")",
    "message": "[ibr-101-ae]-Authority name (BTAE-11) MUST be there when Buyer legal registration identifier type (BTAE-16) is Commercial/Trade license.",
    "references": [
      "BTAE-11",
      "BTAE-16"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-136-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "((cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\") and cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) or not(cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\")",
    "message": "[ibr-136-ae]-Buyer legal registration identifier (IBT-047) must be present when Invoice type code [IBT-003] is 'Out of scope of VAT' or 'Credit note related to goods or services'",
    "references": [
      "IBT-047",
      "IBT-003"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-149-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "not(cac:Party/cbc:EndpointID/@schemeID = \"0235\" and cac:Party/cbc:EndpointID != \"1XXXXXXXXX\" and not(cac:Party/cac:PartyTaxScheme/cbc:CompanyID))",
    "message": "[ibr-149-ae]-The buyer legal registration identifier (IBT-048) MUST be provided when the scheme identifier (IBT-049-1) is '0235' and buyer electronic address (IBT-049) is not '1XXXXXXXXX'",
    "references": [
      "IBT-048",
      "IBT-049"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-179-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "count(cac:PartyTaxScheme/cbc:CompanyID) <=1",
    "message": "[ibr-179-ae]-Buyer tax identifier (IBT-048) MUST occur maximum once",
    "references": [
      "IBT-048"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-135-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "((cac:PartyIdentification/cbc:ID or cac:PartyTaxScheme/cbc:CompanyID) and (not(matches(../../cbc:ProfileExecutionID, \"^\\d{7}1$\")) and cbc:EndpointID/@schemeID = \"0235\" and not(matches(cbc:EndpointID, \"^1\\d{9}$\")))) or not(not(matches(../../cbc:ProfileExecutionID, \"^\\d{7}1$\")) and cbc:EndpointID/@schemeID = \"0235\" and not(matches(cbc:EndpointID, \"^1\\d{9}$\")))",
    "message": "[ibr-135-ae]-Either Buyer identifier (IBT-046) or Buyer tax identifier (IBT-048 ) MUST be present when the Invoice transaction type code [BTAE-02] is other than XXXXXXX1 (Exports) and scheme identifier (IBT-049-1) is '0235' and buyer electronic address (IBT-049) is not '1XXXXXXXXX'",
    "references": [
      "IBT-046",
      "IBT-048",
      "BTAE-02",
      "IBT-049"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-180-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "not(cbc:EndpointID[@schemeID = \"0235\"] and cac:PartyLegalEntity/cbc:CompanyID) or cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID",
    "message": "[ibr-180-ae]-When Scheme identifier (IBT-049-1) is '0235' and Buyer legal registration identifier (ibt-047) is provided, then Buyer legal registration identifier type (BTAE-16) MUST be present",
    "references": [
      "IBT-049",
      "BTAE-16"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-196-ae",
    "flag": "fatal",
    "context": "cac:DeliveryTerms",
    "test": "exists(cbc:ID)",
    "message": "[ibr-196-ae]- The Incoterms (BTAE-22) must be provided.",
    "references": [
      "BTAE-22"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-144-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cac:PostalAddress",
    "test": "(cbc:StreetName) and (cbc:CityName) and (cbc:CountrySubentity)",
    "message": "[ibr-144-ae]-In Buyer postal address (IBG-08), Address line 1 (IBT-050), Buyer city (IBT-052) and Buyer country subdivision (IBT-054) must be provided",
    "references": [
      "IBG-08",
      "IBT-050",
      "IBT-052",
      "IBT-054"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-143-ae",
    "flag": "fatal",
    "context": "cac:AccountingBuyerParty/cac:Party/cac:PostalAddress",
    "test": "(cbc:StreetName) and (cbc:CityName) and (cbc:CountrySubentity)",
    "message": "[ibr-143-ae]-In Seller postal address (IBG-05), Seller address line 1 (IBT-035), Seller city (IBT-037) and Seller to country subdivision (IBT-039) must be provided.",
    "references": [
      "IBG-05",
      "IBT-035",
      "IBT-037",
      "IBT-039"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-012-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"PAS\") or (cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID=\"PAS\" and cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName  and matches(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName, \"^(AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|CV|KH|CM|CA|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|SZ|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|MK|RO|RU|RW|RE|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW)$\"))",
    "message": "[ibr-012-ae]-Passport issuing country code (BTAE-18) MUST be there when Seller legal registration identifier type (BTAE-15) is 'Passport'",
    "references": [
      "BTAE-18",
      "BTAE-15"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-172-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\" and (cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName)) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\")",
    "message": "[ibr-172-ae]-Authority name (BTAE-12) MUST be there when the value in Seller legal registration identifier type (BTAE-15) is Commercial/Trade license.",
    "references": [
      "BTAE-12",
      "BTAE-15"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-177-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\")) or cac:PartyTaxScheme/cbc:CompanyID != cac:PartyIdentification/cbc:ID",
    "message": "[ibr-177-ae]-Either Seller tax registration identifier (IBT-032) or Seller tax identifier (IBT-031) MUST be provided",
    "references": [
      "IBT-032",
      "IBT-031"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-178-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "(count(cac:PartyTaxScheme) = 2 and count(cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = \"VAT\"]) = 1) or count(cac:PartyTaxScheme) < 2",
    "message": "[ibr-178-ae]-Tax scheme code, if provided in (IBT-031-1) shall be '!VAT' when Seller tax registration identifier (IBT-032) is provided",
    "references": [
      "IBT-031",
      "IBT-032"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-150-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cac:Party/cbc:EndpointID/@schemeID = \"0235\" and not(cac:Party/cac:PartyLegalEntity/cbc:CompanyID))",
    "message": "[ibr-150-ae]-The Seller legal registration identifier (IBT-030) MUST be provided when the scheme identifier (IBT-034-1) is '0235'",
    "references": [
      "IBT-030",
      "IBT-034"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-173-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID and  cbc:EndpointID/@schemeID = \"0235\" and cac:PostalAddress/cac:Country/cbc:IdentificationCode = \"AE\" and  not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = (\"TL\", \"EID\", \"PAS\", \"CD\")))",
    "message": "[ibr-173-ae]-The value in Seller legal registration identifier type [BTAE-15] Scheme identifier [IBT-030-1] should either be 'Commercial/Trade license' or 'Emirates ID' or 'Passport' or 'Cabinet decision' when the value in Seller legal registration identifier (IBT-030) is provided and scheme identifier (IBT-034-1) is '0235' and the Seller country code (IBT-055) is AE.",
    "references": [
      "BTAE-15",
      "IBT-030",
      "IBT-034",
      "IBT-055"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-181-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cbc:EndpointID[@schemeID = \"0235\"]) or not(cac:PartyLegalEntity/cbc:CompanyID) or  cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID",
    "message": "[ibr-181-ae]-When Scheme identifier (IBT-034-1) is '0235' and Seller legal registration identifier (ibt-030) is provided, then Seller legal registration identifier type (BTAE-15) MUST be present",
    "references": [
      "IBT-034",
      "BTAE-15"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-004",
    "flag": "fatal",
    "context": "cac:Price/cac:AllowanceCharge",
    "test": "not(cbc:BaseAmount) or xs:decimal(../cbc:PriceAmount) = xs:decimal(cbc:BaseAmount) - xs:decimal(cbc:Amount)",
    "message": "[aligned-ibrp-004]-Item net price (ibt-146) MUST equal (Gross price (ibt-148) - Price discount (ibt-147)) when gross price is provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-126-ae",
    "flag": "fatal",
    "context": "cac:Price",
    "test": "boolean(cbc:BaseQuantity) and boolean(cac:AllowanceCharge/cbc:BaseAmount)",
    "message": "[ibr-126-ae]-In Price Details (IBG-29), Item price base quantity (IBT-149) and Item Gross Price (IBT-148) MUST be there.",
    "references": [
      "IBG-29",
      "IBT-149",
      "IBT-148"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-192-ae",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "not(cbc:PaymentMeansTypeCode = \"30\") or cac:PayeeFinancialAccount/cbc:ID",
    "message": "[ibr-192-ae]- when Payment means type code (ibt-081) is 'credit transfer' then Payment account identifier (ibt-084) must be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-128-ae",
    "flag": "fatal",
    "context": "cac:PostalAddress",
    "test": "(cac:Country/cbc:IdentificationCode=\"AE\" and cbc:CountrySubentity = (\"AUH\", \"DXB\", \"SHJ\", \"UAQ\", \"FUJ\", \"AJM\", \"RAK\")) or not(cac:Country/cbc:IdentificationCode=\"AE\")",
    "message": "[ibr-128-ae]-When Country code (IBT-040, IBT-055, IBT-069, IBT-080) is AE, then country subdivision (IBT-039, IBT-054, IBT-068, IBT-079) should be one among one of these (AUH, DXB, SHJ, UAQ, FUJ, AJM, RAK).",
    "references": [
      "IBT-040",
      "IBT-055",
      "IBT-069",
      "IBT-080",
      "IBT-039",
      "IBT-054",
      "IBT-068",
      "IBT-079"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-032",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(parent::ubl:Invoice|parent::cn:CreditNote) or exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID)",
    "message": "[aligned-ibrp-032]-Each Document level allowance (ibg-20) MUST have a Document level allowance VAT category code (ibt-095).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-057",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(cbc:MultiplierFactorNumeric or cbc:BaseAmount) or (cbc:MultiplierFactorNumeric and cbc:BaseAmount)",
    "message": "[aligned-ibrp-057]-Either both or neither Allowance base amount (ibt-093) and percentage (ibt-094) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-131-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(exists(cbc:BaseAmount) and exists(cbc:MultiplierFactorNumeric)) or (cbc:Amount = round(cbc:BaseAmount * cbc:MultiplierFactorNumeric) div 100)",
    "message": "[ibr-131-ae]-Allowance amount (IBT-092, IBT-136) must equal base amount (IBT-093, IBT-137) * percentage (IBT-094, IBT-138) /100 if base amount and percentage exists",
    "references": [
      "IBT-092",
      "IBT-136",
      "IBT-093",
      "IBT-137",
      "IBT-094",
      "IBT-138"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-115-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(cac:CategoryCode/cbc:ID = \"N\")",
    "message": "[ibr-115-ae]-[ibr-115-ae]-Document level allowance tax category code (IBT-095) cannot be 'Standard rate additional VAT'.",
    "references": [
      "IBT-095"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-168-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(cac:TaxCategory/cbc:ID = \"E\" and not(exists(cbc:AllowanceChargeReasonCode)))",
    "message": "[ibr-168-ae]-Document level allowances (IBG-20) with Document level allowance VAT category code (IBT-095) as 'Exempt from VAT' MUST have a Document level allowance VAT exemption reason code (IBT-196)",
    "references": [
      "IBG-20",
      "IBT-095",
      "IBT-196"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-037",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(parent::ubl:Invoice|parent::cn:CreditNote) or exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID)",
    "message": "[aligned-ibrp-037]-Each Document level charge (ibg-21) MUST have a Document level charge VAT category code (ibt-102).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-058",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(cbc:MultiplierFactorNumeric or cbc:BaseAmount) or (cbc:MultiplierFactorNumeric and cbc:BaseAmount)",
    "message": "[aligned-ibrp-058]-Either both or neither Charge base amount (ibt-100) and percentage (ibt-101) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-146-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(exists(cbc:BaseAmount) and exists(cbc:MultiplierFactorNumeric)) or (cbc:Amount = (cbc:BaseAmount * cbc:MultiplierFactorNumeric) div 100)",
    "message": "[ibr-146-ae]-Charge amount (IBT-099, IBT-141) must equal base amount (IBT-100, IBT-142) * percentage (IBT-101, IBT-143) /100 if base amount and percentage exists",
    "references": [
      "IBT-099",
      "IBT-141",
      "IBT-100",
      "IBT-142",
      "IBT-101",
      "IBT-143"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-114-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(cac:CategoryCode/cbc:ID = \"N\")",
    "message": "[ibr-114-ae]-Document level charge VAT category code (IBT-102) cannot be 'Standard rate additional VAT'.",
    "references": [
      "IBT-102"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-169-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(cac:TaxCategory/cbc:ID = \"E\" and not(exists(cbc:AllowanceChargeReasonCode)))",
    "message": "[ibr-169-ae]-Document level charge (IBG-21) with Document level charge VAT category code (IBT-102) as 'Exempt from VAT' MUST have a Document level charge VAT exemption reason code (IBT-198).",
    "references": [
      "IBG-21",
      "IBT-102",
      "IBT-198"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-002-ae",
    "flag": "fatal",
    "context": "cbc:CalculationRate",
    "test": "not(matches(., \"^\\d+(\\.\\d{7})?$\"))",
    "message": "[ibr-002-ae]-Currency exchange rate [BTAE-04] should contain the values till maximum of 6 decimal places.",
    "references": [
      "BTAE-04"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-104-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "not(exists(cac:Item/cac:ClassifiedTaxCategory)) or (exists(cac:Item/cac:ClassifiedTaxCategory) and exists(cac:ItemPriceExtension/cac:TaxTotal/cbc:TaxAmount) and exists(cac:ItemPriceExtension/cbc:Amount))",
    "message": "[ibr-104-ae]-An Invoice line (IBG-25), where Line VAT Information (IBG-30) is present then Invoice line amount in AED (BTAE-10) and VAT Line amount in AED (BTAE-08) must be provided.",
    "references": [
      "IBG-25",
      "IBG-30",
      "BTAE-10",
      "BTAE-08"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-111-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Item/cac:ClassifiedTaxCategory/cbc:ID=\"N\" and cac:Item/cac:ClassifiedTaxCategory/cbc:Percent > 0) or not(cac:Item/cac:ClassifiedTaxCategory/cbc:ID=\"N\")",
    "message": "[ibr-111-ae]-An Invoice line (IBG-25) where the VAT category code (IBT-151) is 'Standard rate additional VAT' the Invoiced item VAT rate (IBT-152) should not be zero.",
    "references": [
      "IBG-25",
      "IBT-151",
      "IBT-152"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-145-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Item/cac:ClassifiedTaxCategory)",
    "message": "[ibr-145-ae]-Each Invoice line (IBG-25) MUST be categorized with an Invoiced item tax category code (IBT-151)..",
    "references": [
      "IBG-25",
      "IBT-151"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-147-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "round(cbc:LineExtensionAmount * 100) div 100 = round((((cbc:InvoicedQuantity | cbc:CreditedQuantity) * (cac:Price/cbc:PriceAmount div cac:Price/cbc:BaseQuantity)) + sum(cac:AllowanceCharge[cbc:ChargeIndicator=\"true\"]/cbc:Amount) - sum(cac:AllowanceCharge[cbc:ChargeIndicator=\"false\"]/cbc:Amount)) * 100) div 100",
    "message": "[ibr-147-ae]-Invoice line net amount (IBT-131) MUST equal (Invoiced quantity (IBT-129) * (Item net price (IBT-146)/item price base quantity (IBT-149)) + Sum of invoice line charge amount (IBT-141) - sum of invoice line allowance amount (IBT-136).",
    "references": [
      "IBT-131",
      "IBT-129",
      "IBT-146",
      "IBT-149",
      "IBT-141",
      "IBT-136"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-167-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "not(cac:Item/cac:ClassifiedTaxCategory/cbc:ID = \"E\" and not(exists(cac:Item/cac:ClassifiedTaxCategory/cbc:TaxExemptionReasonCode)))",
    "message": "[ibr-167-ae]-Line VAT information (IBG-30) with Invoiced item VAT category code (IBT-151) as 'Exempt from VAT' MUST have a VAT exemption reason code (IBT-186).",
    "references": [
      "IBG-30",
      "IBT-151",
      "IBT-186"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-123-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "((../cbc:InvoiceTypeCode = \"81\" or ../cbc:InvoiceTypeCode = \"480\") and count(cac:Item/cac:ClassifiedTaxCategory) = 1) or not(../cbc:InvoiceTypeCode = \"81\" or ../cbc:InvoiceTypeCode = \"480\")",
    "message": "[ibr-123-ae]- Line VAT Information (IBG - 30) MUST be there and can occur maximum once except in case when invoice type code is 'Out of scope of VAT' or 'Credit note related to goods or services'.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-194-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cac:ItemPriceExtension/cbc:Amount)",
    "message": "[ibr-194-ae]- Invoice line Amount payable (BTAE-10) must be provided.",
    "references": [
      "BTAE-10"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-001-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "starts-with(normalize-space(cbc:CustomizationID/text()), 'urn:peppol:pint:billing-1@ae-1') or starts-with(normalize-space(cbc:CustomizationID/text()), 'urn:peppol:pint:selfbilling-1@ae-1')",
    "message": "[aligned-ibrp-001-ae]-Specification identifier (ibt-024) MUST start with the value 'urn:peppol:pint:billing-1@ae-1' or 'urn:peppol:pint:selfbilling-1@ae-1'.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-002-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "/*/cbc:ProfileID and (matches(normalize-space(/*/cbc:ProfileID), 'urn:peppol:bis:billing') or matches(normalize-space(/*/cbc:ProfileID), 'urn:peppol:bis:selfbilling'))",
    "message": "[aligned-ibrp-002-ae]-Business process (ibt-023) MUST be in the format 'urn:peppol:bis:billing' or 'urn:peppol:bis:selfbilling'.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']) = 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']))",
    "message": "[aligned-ibrp-e-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Exempt from VAT\" MUST contain exactly one VAT breakdown (ibg-23) with the VAT category code (ibt-118) equal to \"Exempt from VAT\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']) = 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']))",
    "message": "[aligned-ibrp-o-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Not subject to VAT\" MUST contain exactly one VAT breakdown group (ibg-23) with the VAT category code (ibt-118) equal to \"Not subject to VAT\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((count(//cac:AllowanceCharge/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) + count(//cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'])) > 0 and count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) > 0) or ((count(//cac:AllowanceCharge/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) + count(//cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'])) = 0 and count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) = 0)",
    "message": "[aligned-ibrp-s-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Standard rated\" MUST contain in the VAT breakdown (ibg-23) at least one VAT category code (ibt-118) equal with \"Standard rated\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']) = 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']))",
    "message": "[aligned-ibrp-z-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Zero rated\" MUST contain in the VAT breakdown (ibg-23) exactly one VAT category code (ibt-118) equal with \"Zero rated\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-01-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']) >= 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']))",
    "message": "[aligned-ibrp-ae-01-ae]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-095 or ibt-102) is \"Reverse charge\" MUST contain in the VAT Breakdown (ibg-23) at least one VAT category code (ibt-118) equal with \"VAT reverse charge\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-sr-12",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[cac:TaxScheme/upper-case(cbc:ID)='VAT']/cbc:CompanyID) <= 1)",
    "message": "[aligned-ibrp-sr-12]-Seller tax identifier (ibt-031) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-007-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^1[01]{6}$\")) or cac:BuyerCustomerParty/cac:Party/cac:PartyIdentification/cbc:ID",
    "message": "[ibr-007-ae]-When Invoice Transaction-type code (BTAE-02) has value 1XXXXXXX (Free trade zone), then providing value in Beneficiary ID (BTAE-01) MUST be provided.",
    "references": [
      "BTAE-02",
      "BTAE-01"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-134-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(not(cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\") and cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = \"VAT\"]/cbc:CompanyID) or (cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\")",
    "message": "[ibr-134-ae]-Seller tax Identifier (IBT-031) MUST be there, except when the Invoice type code (IBT-003) is 'Out of scope of VAT' or 'Credit note related to goods or services'.",
    "references": [
      "IBT-031",
      "IBT-003"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-137-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\") and cac:SellerSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID) or not(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\"))",
    "message": "[ibr-137-ae]-Principle ID (BTAE-14) is MUST, where Invoice transaction type code [BT-UAE-002] is XXXXX1XX (Disclosed Agent billing).",
    "references": [
      "BTAE-14"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-138-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(matches(cbc:ProfileExecutionID, \"^[01]{3}1[01]{4}$\") and cac:InvoicePeriod) or not(matches(cbc:ProfileExecutionID, \"^[01]{3}1[01]{4}$\"))",
    "message": "[ibr-138-ae]-Invoicing period [IBG-14] is MUST, where Invoice transaction type code [BTAE-002] is XXX1XXXX (Summary invoice).",
    "references": [
      "IBG-14",
      "BTAE-002"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-141-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxPointDate) or cbc:TaxPointDate < cbc:IssueDate",
    "message": "[ibr-141-ae]-When, Tax point date [IBT-007] is present, it should be before the Invoice issue date [IBT-002].",
    "references": [
      "IBT-007",
      "IBT-002"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-055-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((cbc:InvoiceTypeCode = \"381\" or cbc:InvoiceTypeCode = \"81\") and (((cac:BillingReference) and  (cac:DiscrepancyResponse/cbc:ResponseCode != \"VD\")) or (not(cac:BillingReference) and  (cac:DiscrepancyResponse/cbc:ResponseCode = \"VD\"))))  or not(cbc:InvoiceTypeCode = \"381\" or cbc:InvoiceTypeCode = \"81\")",
    "message": "[ibr-055-ae]-Preceding invoice reference (IBG-03) is must when invoice type code (IBT-003) is 381 (Credit note) or 81 (Credit note related to goods or services) except when the [BTAE-03] Credit note reason code is 'VD'.",
    "references": [
      "IBG-03",
      "IBT-003",
      "BTAE-03"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-142-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^[01]{6}1[01]$\")) or (cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:StreetName and cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CityName and  cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CountrySubentity)",
    "message": "[ibr-142-ae]-In Delivery Information (ibg-13), Deliver to address line 1 (IBT-075), Deliver to city (IBT-077), Deliver to country subdivision (IBT-079) MUST be there, in case the Invoice transaction type code [BTAE-02] is XXXXXX1X (E-commerce supplies).",
    "references": [
      "IBT-075",
      "IBT-077",
      "IBT-079",
      "BTAE-02"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-105-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))=\"VAT\"]/cbc:ID[normalize-space(.) = \"N\"]) and (count(//cac:TaxTotal/cac:TaxSubtotal) = 1)) or not(exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))=\"VAT\"]/cbc:ID[normalize-space(.) = \"N\"]))",
    "message": "[ibr-105-ae]-An Invoice that contains an Invoice line (IBG-25), where the VAT category code (IBT-151) is 'Standard rate additional VAT' shall contain exactly one VAT breakdown group (IBG-23) with the VAT category code (IBT-118) equal to 'Standard rate additional VAT'.",
    "references": [
      "IBG-25",
      "IBT-151",
      "IBG-23",
      "IBT-118"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-122-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((cbc:InvoiceTypeCode = \"81\" or cbc:InvoiceTypeCode = \"480\") and (//cac:TaxCategory/cbc:ID = \"E\" or //cac:TaxCategory/cbc:ID = \"O\" or //cac:TaxCategory/cbc:ID = \"Z\") and (//cac:ClassifiedTaxCategory/cbc:ID = \"E\" or //cac:ClassifiedTaxCategory/cbc:ID = \"O\"  or //cac:ClassifiedTaxCategory/cbc:ID = \"Z\")) or not(cbc:InvoiceTypeCode = \"81\" or cbc:InvoiceTypeCode = \"480\")",
    "message": "[ibr-122-ae]-When Invoice type code (IBT-003) is 'Out of scope of VAT' or 'Credit note related to goods or services', then the Document level allowance VAT category code (IBT-095), Document level charge VAT category code (IBT-102), Invoiced item VAT category code (IBT-151) MUST be either 'Exempt from VAT' and/or 'Not subject to VAT' and/or 'Zero rated'.",
    "references": [
      "IBT-003",
      "IBT-095",
      "IBT-102",
      "IBT-151"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-124-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:InvoiceTypeCode = \"381\" or cbc:InvoiceTypeCode = \"81\") or not(cbc:TaxPointDate)",
    "message": "[ibr-124-ae]-Tax point date [IBT-007] MUST not be there when invoice type code (IBT-003) is 'credit note' or 'Credit note related to goods or services'.",
    "references": [
      "IBT-007",
      "IBT-003"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-127-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((cbc:InvoiceTypeCode | cbc:CreditNoteTypeCode) = \"381\" or (cbc:InvoiceTypeCode | cbc:CreditNoteTypeCode) = \"81\" or (cbc:CreditNoteTypeCode) = \"261\") or (matches(cbc:ProfileExecutionID, \"^[01]1[01]{6}$\")) or (cac:LegalMonetaryTotal/cbc:PayableAmount > 0 and (cbc:DueDate))",
    "message": "[ibr-127-ae]-Payment due date [IBT-009] MUST be present when the amount due for payment (IBT-115) greater than 0, except when invoice type code (IBT-003) is 'Credit note' or 'Credit note related to goods or services' or Invoice transaction-type code (BTAE-002) is X1XXXXXX (Deemed supply) .",
    "references": [
      "IBT-009",
      "IBT-115",
      "IBT-003",
      "BTAE-002"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-116-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^[01]{2}1[01]{5}$\")) or not(//cac:TaxCategoryCode/cbc:ID = \"N\")",
    "message": "[ibr-116-ae]-When Invoice transaction-type code (BTAE-02) has value XX1XXXXX (Margin scheme), then the tax category code (IBT-151) should have 'Standard rate additional VAT '.",
    "references": [
      "BTAE-02",
      "IBT-151"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-151-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not((cbc:InvoiceTypeCode = \"380\" or cbc:InvoiceTypeCode = \"381\") and not(cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory/cbc:ID != \"E\" and cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory/cbc:ID != \"O\"))",
    "message": "[ibr-151-ae]-When Invoice type code (IBT-003) is 'Commercial invoice' or 'Credit note', Invoiced item VAT category code (IBT-151) should not only contain 'Exempt from VAT' and/or 'Not subject to VAT'.",
    "references": [
      "IBT-003",
      "IBT-151"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-152-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^.{7}1$\")) or (cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:StreetName and cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CityName and  cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CountrySubentity)",
    "message": "[ibr-152-ae]-In Delivery Information (IBG-13), Deliver to address line 1 (IBT-075), deliver to city (IBT-077), deliver to country subdivision (IBT-079) MUST be there, in case the Invoice transaction type code [BTAE-002] is XXXXXXX1 (Exports) and the deliver to country code [IBT-080] should not be 'AE'.",
    "references": [
      "IBG-13",
      "IBT-075",
      "IBT-077",
      "IBT-079",
      "BTAE-002",
      "IBT-080"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-153-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxCurrencyCode = \"AED\" and cbc:DocumentCurrencyCode != \"AED\" and (not(cac:PricingExchangeRate/cbc:SourceCurrencyCode = cbc:DocumentCurrencyCode) or not(cac:PricingExchangeRate/cbc:TargetCurrencyCode = cbc:TaxCurrencyCode) or not(cac:PricingExchangeRate/cbc:CalculationRate)))",
    "message": "[ibr-153-ae] When the VAT accounting currency (IBT-006) is set to AED and the invoice currency code (IBT-005) differs from AED, the source currency must be designated as the invoice currency code (IBT-005), and the target currency must be specified as the VAT accounting currency (IBT-006), provided that the currency exchange rate (BTAE-04) is available.",
    "references": [
      "IBT-006",
      "IBT-005",
      "BTAE-04"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-157-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not((cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\") and  matches(cbc:ProfileExecutionID, \"^[01]{2}1[01]{5}$|^[01]1[01]{6}$|^[01]{3}1[01]{4}$\"))",
    "message": "[ibr-157-ae]-Invoice Transaction-type code (BTAE-02) cannot be XXX1XXXX (Summary invoice) or X1XXXXXX (Deemed supply) or XX1XXXXX (Margin scheme) when the invoice type code (IBT-003) is 'Out of scope of VAT' or 'Credit note related to goods or services'.",
    "references": [
      "BTAE-02",
      "IBT-003"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-158-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:InvoiceTypeCode = \"381\" and not(exists(cac:DiscrepancyResponse/cbc:ResponseCode)))",
    "message": "[ibr-158-ae]-Where the Invoice type code [IBT-003] is 'Credit note', Credit note reason code [BTAE-03] MUST be there .",
    "references": [
      "IBT-003",
      "BTAE-03"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-159-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(cbc:DocumentCurrencyCode != \"AED\" and (exists(//cbc:CalculationRate))) or cbc:DocumentCurrencyCode = \"AED\"",
    "message": "[ibr-159-ae]-Currency exchange rate [BTAE-04] is MUST when then Invoice currency code [IBT-005] is different from 'AED'.",
    "references": [
      "BTAE-04",
      "IBT-005"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-160-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cac:InvoicePeriod/cbc:DescriptionCode = \"OTH\" and not(exists(cbc:Note)))",
    "message": "[ibr-160-ae]-When Frequency of billing (BTAE-06) value is 'Others', then value should be provided in Invoice note (IBT-022).",
    "references": [
      "BTAE-06",
      "IBT-022"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-175-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "cbc:DocumentCurrencyCode = \"AED\" or (cbc:DocumentCurrencyCode != \"AED\" and cbc:TaxCurrencyCode = \"AED\" and exists(cac:TaxTotal/cbc:TaxAmount[@currencyID = \"AED\"]) and exists(cac:AdditionalDocumentReference[cbc:DocumentTypeCode = \"aedtotal-incl-vat\"]/cbc:DocumentDescription))",
    "message": "[ibr-175-ae]-When Invoice currency code [IBT-005] is other than 'AED' and Tax accounting currency [IBT-006] is 'AED', then the value in Invoice total VAT amount in VAT accounting currency [IBT-111] and Invoice total amount with VAT in tax accounting currency [BTAE-20] MUST be present.",
    "references": [
      "IBT-005",
      "IBT-006",
      "IBT-111",
      "BTAE-20"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-176-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\") and cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID !=  cac:SellerSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID) or not(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\"))",
    "message": "[ibr-176-ae]-When Invoice transaction type code [BTAE-02] is XXXXX1XX (Disclosed agent billing), then the value in field Seller tax Identifier [IBT-031] and Principle ID [BTAE-14] should not be the same.",
    "references": [
      "BTAE-02",
      "IBT-031",
      "BTAE-14"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-183-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID) or not(cbc:EndpointID[@schemeID = \"0235\"]) or  starts-with(cbc:EndpointID, \"1\") or cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = (\"CL\", \"EID\", \"PAS\", \"CD\")",
    "message": "[ibr-183-ae]-The value in Buyer legal registration identifier type [BTAE-16] should either be 'Commercial/Trade license' or 'Emirates ID' or 'Passport' or 'Cabinet decision' when Buyer legal registration identifier (IBT-047) is provided and scheme identifier (IBT-049-1) is '0235' and buyer electronic address (IBT-049) is not '1XXXXXXXXX'.",
    "references": [
      "BTAE-16",
      "IBT-047",
      "IBT-049"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-190-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(//cac:TaxCategory/cbc:ID = \"S\") or //cac:TaxCategory[cbc:ID = \"S\"]/cbc:Percent = 5.00",
    "message": "[ibr-190-ae]- When the Invoiced item VAT category code (ibt-151), Document level allowance VAT category code (ibt-095), Document level charge VAT category code (ibt-102) is Standard rated then Invoiced item VAT rate (ibt-152), Document level allowance VAT rate (ibt-096), Document level charge VAT rate (ibt-103) must be 5.00.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-191-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:PaymentMeans/cbc:PaymentMeansCode) = not((cbc:InvoiceTypeCode|cbc:CreditNoteTypeCode) = \"81\" or (cbc:InvoiceTypeCode|cbc:CreditNoteTypeCode) = \"381\" or  (cbc:InvoiceTypeCode|cbc:CreditNoteTypeCode) = \"261\"or matches(cbc:ProfileExecutionID, \"^\\d1\\d{6}$\"))",
    "message": "[ibr-191-ae]- Payment means type code (ibt-081) must be provided except when the invoice type code (ibt-003) is 'Credit note' or 'Credit note related to goods or Invoice transaction-type code (BTAE-002) is X1XXXXXX (Deemed supply) .",
    "references": [
      "BTAE-002"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-154-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "string-length(cbc:ProfileExecutionID) <= 8 and (matches(cbc:ProfileExecutionID, \"^[01]{1,8}$\"))",
    "message": "[ibr-154-ae]-Invoice Transaction-type code (BTAE-02) must be provided from the Invoice Transaction Type Code List. It should be a string consisting of no more than 8 characters, exclusively comprising of 0 and 1. The value in this field should be based on the sequence of transaction present in the invoice (as per list order), If applicable '1', and if not applicable '0' .",
    "references": [
      "BTAE-02"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-140-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxCurrencyCode) or cbc:TaxCurrencyCode = \"AED\"",
    "message": "[ibr-140-ae]-When VAT accounting currency (IBT-006) is present, it shall be AED.",
    "references": [
      "IBT-006"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-193-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cbc:UUID)",
    "message": "[ibr-193-ae]- The unique identifier number (BTAE-07) must be provided.",
    "references": [
      "BTAE-07"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-125-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "boolean(cbc:Description)",
    "message": "[ibr-125-ae]-In Item Information(IBG-31), Item description (IBT-154) MUST be there.",
    "references": [
      "IBG-31",
      "IBT-154"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-166-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:ClassifiedTaxCategory/cbc:ID = \"AE\" and (exists(cac:InvoiceLine/cac:Item/cac:CommodityClassification/cbc:NatureCode))) or cac:ClassifiedTaxCategory/cbc:ID != \"AE\"",
    "message": "[ibr-166-ae]-In Item information (IBG-31) where Invoiced VAT category code (IBT-151) is 'Reverse charge', Type of goods or services (BTAE-09) MUST be there.",
    "references": [
      "IBG-31",
      "IBT-151",
      "BTAE-09"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-184-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:CommodityCode = \"G\") or cac:CommodityClassification/cbc:ItemClassificationCode",
    "message": "[ibr-184-ae]-When the Item type [BTAE-13] is 'Goods' then Item classification identifier (ibt-158) must be provided. .",
    "references": [
      "BTAE-13"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-185-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:CommodityCode = \"S\") or cac:AdditionalItemIdentification/cbc:ID",
    "message": "[ibr-185-ae]-When the Item type [BTAE-13] is 'Services' then Service accounting code (BTAE-17) must be provided. .",
    "references": [
      "BTAE-13",
      "BTAE-17"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-186-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:CommodityCode = \"B\") or cac:CommodityClassification/cbc:ItemClassificationCode or cac:AdditionalItemIdentification/cbc:ID",
    "message": "[ibr-186-ae]-When the Item type [BTAE-13] is 'Both' then Item classification identifier (ibt-158) and Service accounting code (BTAE-17) must be provided. .",
    "references": [
      "BTAE-13",
      "BTAE-17"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-187-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "true()",
    "message": "[ibr-187-ae]- The minimum number of digits to be provided should be 'X' in Item classification identifier (ibt-158) and Service accounting code (BTAE-17).",
    "references": [
      "BTAE-17"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-188-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:ItemClassificationCode) or cac:CommodityClassification/cbc:ItemClassificationCode/@listID = \"HS\"",
    "message": "[ibr-188-ae]- The scheme identifier (ibt-158-1) MUST be HS when Item classification identifier (ibt-158) is provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-189-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:AdditionalItemIdentification/cbc:ID) or cac:AdditionalItemIdentification/cbc:ID/@schemeID = \"SAC\"",
    "message": "[ibr-189-ae]- The scheme identifier (BTAE-17-1) MUST be SAC when Service accounting code (BTAE-17) is provided.",
    "references": [
      "BTAE-17"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-045",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cbc:TaxableAmount)",
    "message": "[aligned-ibrp-045]-Each VAT breakdown (ibg-23) MUST have a VAT category taxable amount (ibt-116).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-046",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cbc:TaxAmount)",
    "message": "[aligned-ibrp-046]-Each VAT breakdown (ibg-23) MUST have a VAT category tax amount (ibt-117).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-047",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID)",
    "message": "[aligned-ibrp-047]-Each VAT breakdown (ibg-23) MUST be defined through a VAT category code (ibt-118).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-048",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:Percent) or (cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/normalize-space(cbc:ID)='O')",
    "message": "[aligned-ibrp-048]-Each VAT breakdown (ibg-23) MUST have a VAT category rate (ibt-119), except if the Invoice is not subject to VAT.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-119-ae",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "(cac:TaxCategory/cbc:ID = \"O\") and not(cac:TaxCategory/cbc:Percent) or  (not(cac:TaxCategory/cbc:ID = \"O\")) and cac:TaxCategory/cbc:Percent",
    "message": "[ibr-119-ae]-Each VAT breakdown (IBG-23) shall have a VAT category rate (IBT-119), except if the Invoice is not subject to VAT.",
    "references": [
      "IBG-23",
      "IBT-119"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) > 0)",
    "message": "[aligned-ibrp-s-05]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Standard rated\" the Invoiced item VAT rate (ibt-152) MUST be greater than zero.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) > 0)",
    "message": "[aligned-ibrp-s-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Standard rated\" the Document level allowance VAT rate (ibt-96) MUST be greater than zero.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) > 0)",
    "message": "[aligned-ibrp-s-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Standard rated\" the Document level charge VAT rate (ibt-103) MUST be greater than zero.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "every $rate in xs:decimal(cbc:Percent) satisfies (((exists(//cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = 'S'][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]) or exists(//cac:AllowanceCharge[cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate])) and (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='S'][cac:Item/ cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)),0.02))) or ((exists(//cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = 'S'][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]) or exists(//cac:AllowanceCharge[cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate])) and (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='S'][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)),0.02))))",
    "message": "[aligned-ibrp-s-08]-For each different value of VAT category rate (ibt-119) where the VAT category code (ibt-118) is \"Standard rated\", the VAT category taxable amount (ibt-116) in a VAT breakdown (ibg-23) MUST equal the sum of Invoice line net amounts (ibt-131) plus the sum of document level charge amounts (ibt-99) minus the sum of document level allowance amounts (ibt-92) where the VAT category code (ibt-151, ibt-102, ibt-95) is \"Standard rated\" and the VAT rate (ibt-152, ibt-103, ibt-96) equals the VAT category rate (ibt-119).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "u:slack(abs(xs:decimal(../cbc:TaxAmount)) , round((abs(xs:decimal(../cbc:TaxableAmount)) * (xs:decimal(cbc:Percent) div 100)) * 10 * 10) div 100 ,0.02 )",
    "message": "[aligned-ibrp-s-09]-The VAT category tax amount (ibt-117) in a VAT breakdown (ibg-23) where VAT category code (ibt-118) is \"Standard rated\" MUST equal the VAT category taxable amount (ibt-116) multiplied by the VAT category rate (ibt-119).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-10",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:TaxExemptionReason) and not(cbc:TaxExemptionReasonCode)",
    "message": "[aligned-ibrp-s-10]-A VAT breakdown (ibg-23) with VAT Category code (ibt-118) \"Standard rate\" MUST not have a VAT exemption reason code (ibt-121) or VAT exemption reason text (ibt-120).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-102-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'N'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "every $rate in xs:decimal(cbc:Percent) satisfies ((exists(//cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = \"N\"][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]) and  (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)=\"N\"][cac:Item/ cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)),0.02))) or (exists(//cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = \"N\"][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate])  and (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)=\"N\"][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)) ,0.02))))",
    "message": "[ibr-102-ae]-In a VAT Breakdown (IBG-23) where the VAT category code (IBT-118) is 'Standard rate additional VAT', for each different value of VAT category rate (IBT-119) the VAT category taxable amount (IBT-116) shall equal the sum of Invoice line net amounts (IBT-131) where the VAT category code (IBT-151) is 'Standard rate additional VAT' and the VAT rate (IBT-152) equals the VAT category rate (IBT-119).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119",
      "IBT-116",
      "IBT-131",
      "IBT-151",
      "IBT-152"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-108-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'N'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../cbc:TaxAmount = 0",
    "message": "[ibr-108-ae]-In a VAT breakdown (IBG-23), where VAT category code (IBT-118) is 'Standard rate additional VAT', VAT category tax amount (IBT-117) MUST be equal to 0 (zero).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-117"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-e-08]-In a VAT breakdown (ibg-23) where the VAT category code (ibt-118) is \"Exempt from VAT\" the VAT category taxable amount (ibt-116) MUST equal the sum of Invoice line net amounts (ibt-131) minus the sum of Document level allowance amounts (ibt-92) plus the sum of Document level charge amounts (ibt-99) where the VAT category codes (ibt-151, ibt-95, ibt-102) are \"Exempt from VAT\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-e-09]-The VAT category tax amount (ibt-117) In a VAT breakdown (ibg-23) where the VAT category code (ibt-118) equals \"Exempt from VAT\" MUST equal 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-121-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cac:TaxCategory)",
    "message": "[ibr-121-ae]-In a VAT breakdown (IBG-23) where VAT category code (IBT-118) is 'Exempt from VAT', VAT category VAT Rate (IBT-119) shall not be provided.",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-e-05]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Exempt from VAT\", the Invoiced item VAT rate (ibt-152) MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-163-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(../../cac:ItemPriceExtension/cac:TaxAmount/cbc:TaxAmount)",
    "message": "[ibr-163-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Exempt', VAT Line amount [BTAE-08] shall not be there.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-e-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Exempt from VAT\", the Document level allowance VAT rate (ibt-96) MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-e-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Exempt from VAT\", the Document level charge VAT rate (ibt-103) MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-z-05]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Zero rated\" the Invoiced item VAT rate (ibt-152) MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-165-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../../cac:ItemPriceExtension/cac:TaxTotal/cbc:TaxAmount = 0",
    "message": "[ibr-165-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Zero Rated', VAT Line amount [BTAE-08] MUST be zero.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-z-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Zero rated\" the Document level allowance VAT rate (ibt-96) MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-z-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Zero rated\" the Document level charge VAT rate (ibt-103) MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-z-08]-In a VAT breakdown (ibg-23) where VAT category code (ibt-118) is \"Zero rated\" the VAT category taxable amount (ibt-116) MUST equal the sum of Invoice line net amount (ibt-131) minus the sum of Document level allowance amounts (ibt-92) plus the sum of Document level charge amounts (ibt-99) where the VAT category codes (ibt-151, ibt-95, ibt-102) are \"Zero rated\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-z-09]-The VAT category tax amount (ibt-117) in a VAT breakdown (ibg-23) where VAT category code (ibt-118) is \"Zero rated\" MUST equal 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-120-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../cbc:TaxAmount = 0",
    "message": "[ibr-120-ae]-In a VAT breakdown (IBG-23) where VAT category code (IBT-118) is 'Zero Rated', VAT category VAT Rate (IBT-119) shall equal to 0.",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:Percent)",
    "message": "[aligned-ibrp-o-05]-An Invoice line (ibg-25) where the VAT category code (ibt-151) is \"Not subject to VAT\" MUST not contain an Invoiced item VAT rate (ibt-152).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-164-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(../../cac:ItemPriceExtension/cac:TaxAmount/cbc:TaxAmount)",
    "message": "[ibr-164-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Not Subject to VAT', VAT Line amount [BTAE-08] shall not be there.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:Percent)",
    "message": "[aligned-ibrp-o-06]-A Document level allowance (ibg-20) where VAT category code (ibt-95) is \"Not subject to VAT\" MUST not contain a Document level allowance VAT rate (ibt-96).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:Percent)",
    "message": "[aligned-ibrp-o-07]-A Document level charge (ibg-21) where the VAT category code (ibt-102) is \"Not subject to VAT\" MUST not contain a Document level charge VAT rate (ibt-103).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-o-08]-In a VAT breakdown (ibg-23) where the VAT category code (ibt-118) is \" Not subject to VAT\" the VAT category taxable amount (ibt-116) MUST equal the sum of Invoice line net amounts (ibt-131) minus the sum of Document level allowance amounts (ibt-92) plus the sum of Document level charge amounts (ibt-99) where the VAT category codes (ibt-151, ibt-95, ibt-102) are \"Not subject to VAT\".",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-o-09]-The VAT category tax amount (ibt-117) in a VAT breakdown (ibg-23) where the VAT category code (ibt-118) is \"Not subject to VAT\" MUST be 0 (zero).",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-11-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:Percent))",
    "message": "[aligned-ibrp-o-11-ae]-In a VAT breakdown (IBG-23) where VAT category code (IBT-118) is 'Not Subject to VAT', VAT category tax Rate (IBT-119) shall not be provided.",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-05-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent))",
    "message": "[aligned-ibrp-ae-05-ae]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Reverse charge\" the Invoiced item VAT rate (ibt-152) MUST be there.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-103-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "exists(../../../cac:AccountingCustomerParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID)",
    "message": "[ibr-103-ae]-When the Invoiced item VAT category code (ibt-151) is VAT reverse charge, then Buyer VAT identifier (ibt-048) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-162-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../../cac:ItemPriceExtension/cac:TaxTotal/cbc:TaxAmount = 0",
    "message": "[ibr-162-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Reverse charge', VAT Line amount [BTAE-08] MUST be 'zero'.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-174-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(not(exists(../cac:StandardItemIdentification/cbc:ID)) or ../cac:StandardItemIdentification/cbc:ID/@schemeID != \"0160\")",
    "message": "[ibr-174-ae]-In Item Information (IBG-31) where Invoiced VAT category code (IBT-151) is 'Reverse charge', the corresponding Item Standard Identifier (IBT-157) MUST be there and the Scheme Identifier (IBT-157-1) should have the code 0160.",
    "references": [
      "IBG-31",
      "IBT-151",
      "IBT-157"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-ae-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Reverse charge\" the Document level allowance VAT rate (ibt-96) MUST be greater than zero.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-ae-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Reverse charge\" the Document level charge VAT rate (ibt-103) MUST be greater than zero.",
    "references": [],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-08-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-ae-08-ae]-In a VAT Breakdown (IBG-23) where the VAT category code (IBT-118) is 'Reverse Charge', for each different value of VAT category rate (IBT-119) the VAT category taxable amount (IBT-116) shall equal the sum of Invoice line net amounts (IBT-131) plus the sum of Document level charge amounts (IBT-99) minus the sum of Document level allowance amounts (IBT-92) where the VAT category code (IBT-151, IBT-102, IBT-095) is 'Reverse Charge' and the VAT rate (IBT-152, IBT-103, IBT-096) equals the VAT category rate (IBT-119).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119",
      "IBT-116",
      "IBT-131",
      "IBT-99",
      "IBT-92",
      "IBT-151",
      "IBT-102",
      "IBT-095",
      "IBT-152",
      "IBT-103",
      "IBT-096"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-09-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-ae-09-ae]-In a VAT breakdown (IBG-23) where the VAT category code (IBT-118) is 'Reverse charge', VAT category tax amount (IBT-117) MUST be equal to 0 (zero).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-117"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-132-ae",
    "flag": "fatal",
    "context": "cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'AE']/cac:PartyTaxScheme/cbc:CompanyID",
    "test": "matches(., \"^1[a-zA-Z0-9]{12}03$\")",
    "message": "[ibr-132-ae]-VAT identifier [IBT-031, IBT-048, IBT-063, BTAE-14] should be TRN [VAT registration number] and must be 15 alphanumeric digits, starting with 1, ending with 03 .",
    "references": [
      "IBT-031",
      "IBT-048",
      "IBT-063",
      "BTAE-14"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-148-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID",
    "test": "matches(., \"^1[0-9]{9}$\")",
    "message": "[ibr-148-ae]-The Seller VAT registration identifier (IBT-032) should be TIN (tax identification number) and must be 10 numeric digits and should be of the format 1XXXXXXXXXX.",
    "references": [
      "IBT-032"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-133-ae",
    "flag": "fatal",
    "context": "cac:TaxScheme/cbc:ID",
    "test": ". = \"VAT\" or not(exists(/cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID))",
    "message": "[ibr-133-ae]-VAT scheme code, if provided in (IBT-095-01) or (IBT-031-1) or (IBT-048-1) or (IBT-063-1) or (IBT-102-1) or (IBT-118-1) shall be 'VAT' except when Seller tax registration identifier (IBT-032) is provided.",
    "references": [
      "IBT-095",
      "IBT-031",
      "IBT-048",
      "IBT-063",
      "IBT-102",
      "IBT-118",
      "IBT-032"
    ],
    "documentType": "creditnote",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-creditnote/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-068",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0088'] | cac:PartyIdentification/cbc:ID[@schemeID = '0088'] | cbc:CompanyID[@schemeID = '0088']",
    "test": "matches(normalize-space(), '^[0-9]+$') and u:gln(normalize-space())",
    "message": "[ibr-068]-GLN MUST have a valid format according to GS1 rules for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-127",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0007'] | cac:PartyIdentification/cbc:ID[@schemeID = '0007'] | cbc:CompanyID[@schemeID = '0007']",
    "test": "string-length(normalize-space()) = 10 and string(number(normalize-space())) != 'NaN'",
    "message": "[ibr-127]-Swedish organization number MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-069",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0192'] | cac:PartyIdentification/cbc:ID[@schemeID = '0192'] | cbc:CompanyID[@schemeID = '0192']",
    "test": "matches(normalize-space(), '^[0-9]{9}$') and u:mod11(normalize-space())",
    "message": "[ibr-069]-Norwegian organization number MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-070",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0184'] | cac:PartyIdentification/cbc:ID[@schemeID = '0184'] | cbc:CompanyID[@schemeID = '0184']",
    "test": "(string-length(text()) = 10) and (substring(text(), 1, 2) = 'DK') and (string-length(translate(substring(text(), 3, 8), '1234567890', '')) = 0)",
    "message": "[ibr-070]-Danish organization number (CVR) MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-113",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0208'] | cac:PartyIdentification/cbc:ID[@schemeID = '0208'] | cbc:CompanyID[@schemeID = '0208']",
    "test": "matches(normalize-space(), '^[0-9]{10}$') and u:mod97-0208(normalize-space())",
    "message": "[ibr-113]-Belgian enterprise number MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-114",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0201'] | cac:PartyIdentification/cbc:ID[@schemeID = '0201'] | cbc:CompanyID[@schemeID = '0201']",
    "test": "u:checkCodiceIPA(normalize-space())",
    "message": "[ibr-114]-IPA Code (Codice Univoco Unit Organizzativa) must be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-115",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0210'] | cac:PartyIdentification/cbc:ID[@schemeID = '0210'] | cbc:CompanyID[@schemeID = '0210'] | cbc:EndpointID[@schemeID = '9907'] | cac:PartyIdentification/cbc:ID[@schemeID = '9907'] | cbc:CompanyID[@schemeID = '9907']",
    "test": "u:checkCF(normalize-space())",
    "message": "[ibr-115]-Tax Code (Codice Fiscale) must be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-116",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0211'] | cac:PartyIdentification/cbc:ID[@schemeID = '0211'] | cbc:CompanyID[@schemeID = '0211'] | cbc:EndpointID[@schemeID = '9906'] | cac:PartyIdentification/cbc:ID[@schemeID = '9906'] | cbc:CompanyID[@schemeID = '9906']",
    "test": "u:checkPIVAseIT(normalize-space())",
    "message": "[ibr-116]-Italian VAT Code (Partita Iva) must be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-120",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0151'] | cac:PartyIdentification/cbc:ID[@schemeID = '0151'] | cbc:CompanyID[@schemeID = '0151']",
    "test": "matches(normalize-space(), '^[0-9]{11}$') and u:abn(normalize-space())",
    "message": "[ibr-120]-Australian Business Number (ABN) must be stated in the correct format for for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-083",
    "flag": "fatal",
    "context": "cac:Price/cac:AllowanceCharge",
    "test": "normalize-space(cbc:ChargeIndicator/text()) = 'false'",
    "message": "[ibr-083]-Charge on price level (ibt-147) is NOT allowed. Only value 'false' allowed.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-30",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "(count(cbc:AllowanceChargeReason) <= 1)",
    "message": "[ibr-sr-30]-Allowance reason (ibt-097) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-031",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "((exists(cbc:Amount) and  not(ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-031]-Allowance (ibg-20) MUST have an allowance amount (ibt-092).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-033",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "((exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode)) and not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-033]-Each Document level allowance (ibg-20) MUST have a Document level allowance reason (ibt-097) or a Document level allowance reason code (ibt-098).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-041",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "exists(cbc:Amount) or not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))",
    "message": "[ibr-041]-Each Invoice line allowance (ibg-27) MUST have an Invoice line allowance amount (ibt-136).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-042",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode) or not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))",
    "message": "[ibr-042]-Each Invoice line allowance (ibg-27) MUST have an Invoice line allowance reason (ibt-139) or an Invoice line allowance reason code (ibt-140).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-036",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "((exists(cbc:Amount) and  not(ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-036]-Charge (ibg-21) MUST have a charge amount (ibt-099).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-31",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "(count(cbc:AllowanceChargeReason) <= 1)",
    "message": "[ibr-sr-31]-Charge reason (ibt-104) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-038",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "((exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode)) and not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-038]-Each Document level charge (ibg-21) MUST have a Document level charge reason (ibt-104) or a Document level charge reason code (ibt-105).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-043",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "exists(cbc:Amount) or not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))",
    "message": "[ibr-043]-Each Invoice line charge (ibg-28) MUST have an Invoice line charge amount (ibt-141).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-044",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode)",
    "message": "[ibr-044]-Each Invoice line charge (ibg-28) MUST have an Invoice line charge reason (ibt-144) or an invoice line charge reason code (ibt-145).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-082",
    "flag": "fatal",
    "context": "cac:AllowanceCharge",
    "test": "normalize-space(cbc:ChargeIndicator/text()) = 'true' or normalize-space(cbc:ChargeIndicator/text()) = 'false'",
    "message": "[ibr-082]-Allowance/charge indicator value MUST equal 'true' or 'false'.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-61",
    "flag": "fatal",
    "context": "cac:AllowanceCharge/cac:TaxCategory",
    "test": "(count(cbc:TaxExemptionReason) <= 1)",
    "message": "[ibr-sr-61]-Allowance/charge tax exemption reason (ibt-197) (ibt-199) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-052",
    "flag": "fatal",
    "context": "cac:AdditionalDocumentReference",
    "test": "(normalize-space(cbc:ID)) != ''",
    "message": "[ibr-052]-Each Additional supporting document (ibg-24) MUST contain a Supporting document reference (ibt-122).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-33",
    "flag": "fatal",
    "context": "cac:AdditionalDocumentReference",
    "test": "(count(cbc:DocumentDescription) <= 1)",
    "message": "[ibr-sr-33]-Supporting document description (ibt-123) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-080",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "cbc:EndpointID",
    "message": "[ibr-080]-The Buyer electronic address (ibt-049) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-063",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cbc:EndpointID",
    "test": "exists(@schemeID)",
    "message": "[ibr-063]-The Buyer electronic address (ibt-049) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-011",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cac:PostalAddress",
    "test": "normalize-space(cac:Country/cbc:IdentificationCode) != ''",
    "message": "[ibr-011]-The Buyer postal address (ibg-08) MUST contain a Buyer country code (ibt-055).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-54",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cac:PostalAddress",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-54]-The Buyer Postal Address Line (ibt-163) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-057",
    "flag": "fatal",
    "context": "cac:Delivery/cac:DeliveryLocation/cac:Address",
    "test": "exists(cac:Country/cbc:IdentificationCode)",
    "message": "[ibr-057]-Each Deliver to address (ibg-15) MUST contain a Deliver to country code (ibt-080).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-56",
    "flag": "fatal",
    "context": "cac:Delivery/cac:DeliveryLocation/cac:Address",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-56]-The Delivery Postal Address Line (ibt-165) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-012",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:LineExtensionAmount)",
    "message": "[ibr-012]-An Invoice MUST have the Sum of Invoice line net amount (ibt-106).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-013",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:TaxExclusiveAmount)",
    "message": "[ibr-013]-An Invoice MUST have the Invoice total amount without Tax (ibt-109).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-014",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:TaxInclusiveAmount)",
    "message": "[ibr-014]-An Invoice MUST have the Invoice total amount with Tax (ibt-112).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-015",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:PayableAmount)",
    "message": "[ibr-015]-An Invoice MUST have the Amount due for payment (ibt-115).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-091",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:PayableAmount, '.')) <= 2",
    "message": "[ibr-091]-Invoice amount due for payment (ibt-115) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-121",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:AllowanceTotalAmount, '.')) <= 2",
    "message": "[ibr-121]-Document level allowance amount (ibt-107) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-122",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:ChargeTotalAmount, '.')) <= 2",
    "message": "[ibr-122]-Document level charge amount (ibt-108) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-123",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:TaxExclusiveAmount, '.')) <= 2",
    "message": "[ibr-123]-Invoice total amount without TAX (ibt-109) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-125",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:TaxInclusiveAmount, '.')) <= 2",
    "message": "[ibr-125]- Invoice total amount with TAX (ibt-112) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-10",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "(xs:decimal(cbc:LineExtensionAmount) = (round(sum(//(cac:InvoiceLine|cac:CreditNoteLine)/xs:decimal(cbc:LineExtensionAmount)) * 10 * 10) div 100))",
    "message": "[ibr-co-10]-Sum of Invoice line net amount (ibt-106) =  Invoice line net amount (ibt-131).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-11",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "xs:decimal(cbc:AllowanceTotalAmount) = (round(sum(../cac:AllowanceCharge[cbc:ChargeIndicator=false()]/xs:decimal(cbc:Amount)) * 10 * 10) div 100) or  (not(cbc:AllowanceTotalAmount) and not(../cac:AllowanceCharge[cbc:ChargeIndicator=false()]))",
    "message": "[ibr-co-11]-Sum of allowances on document level (ibt-107) =  Document level allowance amount (ibt-092).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-12",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "xs:decimal(cbc:ChargeTotalAmount) = (round(sum(../cac:AllowanceCharge[cbc:ChargeIndicator=true()]/xs:decimal(cbc:Amount)) * 10 * 10) div 100) or (not(cbc:ChargeTotalAmount) and not(../cac:AllowanceCharge[cbc:ChargeIndicator=true()]))",
    "message": "[ibr-co-12]-Sum of charges on document level (ibt-108) =  Document level charge amount (ibt-099).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-13",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "../cac:TaxTotal/cbc:TaxIncludedIndicator = true() or (((cbc:ChargeTotalAmount) and (cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = round((xs:decimal(cbc:LineExtensionAmount) + xs:decimal(cbc:ChargeTotalAmount) - xs:decimal(cbc:AllowanceTotalAmount)) * 10 * 10) div 100 ))  or (not(cbc:ChargeTotalAmount) and (cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = round((xs:decimal(cbc:LineExtensionAmount) - xs:decimal(cbc:AllowanceTotalAmount)) * 10 * 10 ) div 100)) or ((cbc:ChargeTotalAmount) and not(cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = round((xs:decimal(cbc:LineExtensionAmount) + xs:decimal(cbc:ChargeTotalAmount)) * 10 * 10 ) div 100)) or (not(cbc:ChargeTotalAmount) and not(cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = xs:decimal(cbc:LineExtensionAmount))))",
    "message": "[ibr-co-13]-Invoice total amount without Tax (ibt-109) =  Invoice line net amount (ibt-131) - Sum of allowances on document level (ibt-107) + Sum of charges on document level (ibt-108).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-16",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "(xs:decimal(cbc:PrepaidAmount) and not(xs:decimal(cbc:PayableRoundingAmount)) and (xs:decimal(cbc:PayableAmount) = (round((xs:decimal(cbc:TaxInclusiveAmount) - xs:decimal(cbc:PrepaidAmount)) * 10 * 10) div 100))) or (not(xs:decimal(cbc:PrepaidAmount)) and not(xs:decimal(cbc:PayableRoundingAmount)) and xs:decimal(cbc:PayableAmount) = xs:decimal(cbc:TaxInclusiveAmount)) or (xs:decimal(cbc:PrepaidAmount) and xs:decimal(cbc:PayableRoundingAmount) and ((round((xs:decimal(cbc:PayableAmount) - xs:decimal(cbc:PayableRoundingAmount)) * 10 * 10) div 100) = (round((xs:decimal(cbc:TaxInclusiveAmount) - xs:decimal(cbc:PrepaidAmount)) * 10 * 10) div 100))) or (not(xs:decimal(cbc:PrepaidAmount)) and xs:decimal(cbc:PayableRoundingAmount) and ((round((xs:decimal(cbc:PayableAmount) - xs:decimal(cbc:PayableRoundingAmount)) * 10 * 10) div 100) = xs:decimal(cbc:TaxInclusiveAmount)))",
    "message": "[ibr-co-16]-Amount due for payment (ibt-115) = Invoice total amount with Tax (ibt-112) - Paid amount (ibt-113) + Rounding amount (ibt-114).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-001",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:CustomizationID) != ''",
    "message": "[ibr-001]-An Invoice MUST have a Specification identifier (ibt-024).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-002",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:ID) !=''",
    "message": "[ibr-002]-An Invoice MUST have an Invoice number (ibt-001).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-003",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:IssueDate) !=''",
    "message": "[ibr-003]-An Invoice MUST have an Invoice issue date (ibt-002).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-004",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:InvoiceTypeCode) !='' or normalize-space(cbc:CreditNoteTypeCode) !=''",
    "message": "[ibr-004]-An Invoice MUST have an Invoice type code (ibt-003).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-005",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:DocumentCurrencyCode) !=''",
    "message": "[ibr-005]-An Invoice MUST have an Invoice currency code (ibt-005).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-006",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) !=''",
    "message": "[ibr-006]-An Invoice MUST contain the Seller name (ibt-027).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-007",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) !=''",
    "message": "[ibr-007]-An Invoice MUST contain the Buyer name (ibt-044).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-008",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:AccountingSupplierParty/cac:Party/cac:PostalAddress)",
    "message": "[ibr-008]-An Invoice MUST contain the Seller postal address (ibg-05).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-010",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:AccountingCustomerParty/cac:Party/cac:PostalAddress)",
    "message": "[ibr-010]-An Invoice MUST contain the Buyer postal address (ibg-08).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-016",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:InvoiceLine) or exists(cac:CreditNoteLine)",
    "message": "[ibr-016]-An Invoice MUST have at least one Invoice line (ibg-25)",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-053",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "every $taxcurrency in cbc:TaxCurrencyCode satisfies exists(//cac:TaxTotal/cbc:TaxAmount[@currencyID=$taxcurrency])",
    "message": "[ibr-053]-If the Tax accounting currency code (ibt-006) is present, then the Invoice total Tax amount in accounting currency (ibt-111) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-066",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "count(cac:PaymentMeans/cac:CardAccount) <= 1",
    "message": "[ibr-066]-An Invoice MUST contain maximum one Payment Card account (ibg-18).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-067",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "count(cac:PaymentMeans/cac:PaymentMandate) <= 1",
    "message": "[ibr-067]-An Invoice MUST contain maximum one Payment Mandate (ibg-19).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-071",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(//cac:AdditionalDocumentReference[cbc:DocumentTypeCode = '130']/cac:Attachment)",
    "message": "[ibr-071]-An invoice should not include an AdditonalDocumentReference (ibg-24) simultaneously referring an Invoice Object Identifier (ibt-018) and an Attachment (ibt-125).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-072",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(//cac:AdditionalDocumentReference[cbc:DocumentTypeCode = '130']/cbc:DocumentDescription)",
    "message": "[ibr-072]-An invoice MUST not include an AdditionalDocumentReference (ibg-24) simultaneously referring an Invoice Object Identifier (ibt-018) and an Document Description (ibt-123).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-076",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cbc:ProfileID)",
    "message": "[ibr-076]-Business process (ibt-023) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-078",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AdditionalDocumentReference[cbc:DocumentTypeCode='130']) <= 1)",
    "message": "[ibr-078]-Only one invoiced object (ibt-018) is allowed on document level.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-084",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxCurrencyCode) or (cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:TaxCurrencyCode)] <= 0 and cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:DocumentCurrencyCode)] <= 0) or (cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:TaxCurrencyCode)] >= 0 and cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:DocumentCurrencyCode)] >= 0)",
    "message": "[ibr-084]-Invoice total tax amount (ibt-110) and Invoice total tax amount in accounting currency (ibt-111) MUST have the same operational sign.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-087",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cac:Price/cbc:BaseQuantity) or xs:decimal(cac:Price/cbc:BaseQuantity) > 0",
    "message": "[ibr-087]-Base quantity (ibt-149) MUST be a positive number above zero.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-090",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ProjectReference) <= 1) and (count(cac:AdditionalDocumentReference[cbc:DocumentTypeCode='50']) <= 1)",
    "message": "[ibr-090]-Only one project reference (ibt-011) is allowed on document level.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-094",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ContractDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-094]-Contract reference (ibt-012) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-095",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ReceiptDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-095]-Receiving advice reference (ibt-015) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-096",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:DespatchDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-096]-Despatch advice reference (ibt-016) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-097",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:InvoicePeriod) <= 1)",
    "message": "[ibr-097]-Invoicing period (ibg-14) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-098",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) <= 1)",
    "message": "[ibr-098]-Seller name (ibt-027) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-099",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-099]-Seller trader name (ibt-028) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-100",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) <= 1)",
    "message": "[ibr-100]-Seller legal registration identifier (ibt-030) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-101",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyLegalForm) <= 1)",
    "message": "[ibr-101]-Seller additional legal information (ibt-033) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-102",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) <= 1)",
    "message": "[ibr-102]-Buyer name (ibt-044) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-103",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) <= 1)",
    "message": "[ibr-103]-Buyer legal registration identifier (ibt-047) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-104",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID) <= 1)",
    "message": "[ibr-104]-Buyer tax identifier (ibt-048) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-107",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:Delivery) <= 1)",
    "message": "[ibr-107]-Deliver to information (ibg-13) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-112",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-112]-Buyer trader name (ibt-045) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-15",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "cac:TaxTotal/cbc:TaxIncludedIndicator = true() or ((cac:LegalMonetaryTotal/xs:decimal(cbc:TaxInclusiveAmount) = round( (cac:LegalMonetaryTotal/xs:decimal(cbc:TaxExclusiveAmount) + cac:TaxTotal/xs:decimal(cbc:TaxAmount[@currencyID=/*/cbc:DocumentCurrencyCode])) * 10 * 10) div 100))",
    "message": "[ibr-co-15]-Invoice total amount with Tax (ibt-112) = Invoice total amount without Tax (ibt-109) + Invoice total Tax amount (ibt-110).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-16",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyIdentification/cbc:ID) <= 1)",
    "message": "[ibr-sr-16]-Buyer identifier (ibt-046) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-39",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ProjectReference/cbc:ID) <= 1)",
    "message": "[ibr-sr-39]-Project reference (ibt-011) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-49",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:InvoicePeriod/cbc:DescriptionCode) <=1)",
    "message": "[ibr-sr-49]-Value tax point date (ibt-007) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-51",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cbc:Note) <= 1)",
    "message": "[ibr-sr-51]-Note (ibt-022) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-52",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:OriginatorDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-sr-52]-Tender or lot reference (ibt-017) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-021",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "normalize-space(cbc:ID) != ''",
    "message": "[ibr-021]-Each Invoice line (ibg-25) MUST have an Invoice line identifier (ibt-126).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-022",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cbc:InvoicedQuantity) or exists(cbc:CreditedQuantity)",
    "message": "[ibr-022]-Each Invoice line (ibg-25) MUST have an invoiced quantity (ibt-129)..",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-023",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cbc:InvoicedQuantity/@unitCode) or exists(cbc:CreditedQuantity/@unitCode)",
    "message": "[ibr-023]-An Invoice line (ibg-25) MUST have an Invoiced quantity unit of measure code (ibt-130).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-024",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cbc:LineExtensionAmount)",
    "message": "[ibr-024]-Each Invoice line (ibg-25) MUST have an Invoice line net amount (ibt-131).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-025",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "normalize-space(cac:Item/cbc:Name) != ''",
    "message": "[ibr-025]-Each Invoice line (ibg-25) MUST contain the Item name (ibt-153).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-026",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cac:Price/cbc:PriceAmount)",
    "message": "[ibr-026]-Each Invoice line (ibg-25) MUST contain the Item net price (ibt-146).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-027",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Price/cbc:PriceAmount) >= 0",
    "message": "[ibr-027]-The Item net price (ibt-146) MUST NOT be negative.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-028",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Price/cac:AllowanceCharge/cbc:BaseAmount) >= 0 or not(exists(cac:Price/cac:AllowanceCharge/cbc:BaseAmount))",
    "message": "[ibr-028]-The Item gross price (ibt-148) MUST NOT be negative.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-089",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:DocumentReference[cbc:DocumentTypeCode = 130]) <= 1)",
    "message": "[ibr-089]-Only one invoiced object (ibt-128) is allowed per line (ibg-25).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-109",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:OrderLineReference/cbc:LineID) <= 1)",
    "message": "[ibr-109]-Referenced purchase order line identifier (ibt-132) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-110",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:InvoicePeriod) <= 1)",
    "message": "[ibr-110]-Invoice line period (ibg-26) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-111",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:Price/cac:AllowanceCharge/cbc:Amount) <= 1)",
    "message": "[ibr-111]-Item price discount (ibt-147) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-34",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cbc:Note) <= 1)",
    "message": "[ibr-sr-34]-Invoice line note (ibt-127) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-38",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:Item/cac:ClassifiedTaxCategory/cbc:TaxExemptionReason) <= 1)",
    "message": "[ibr-sr-38]-Invoiced item tax exemption reason text (ibt-185) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-50",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:Item/cbc:Description) <= 1)",
    "message": "[ibr-sr-50]-Item description (ibt-154) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-085",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "(cbc:StartDate >= xs:date(../../cac:InvoicePeriod/cbc:StartDate)) or not(cbc:StartDate) or not(../../cac:InvoicePeriod/cbc:StartDate)",
    "message": "[ibr-085]-Start date of line period (ibt-134) MUST be within invoice period (ibg-14).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-086",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "(cbc:EndDate <= xs:date(../../cac:InvoicePeriod/cbc:EndDate)) or not(cbc:EndDate) or not(../../cac:InvoicePeriod/cbc:EndDate)",
    "message": "[ibr-086]-End date of line period (ibt-135) MUST be within invoice period (ibg-14).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-030",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "(exists(cbc:EndDate) and exists(cbc:StartDate) and xs:date(cbc:EndDate) >= xs:date(cbc:StartDate)) or not(exists(cbc:StartDate)) or not(exists(cbc:EndDate))",
    "message": "[ibr-030]-If both Invoice line period start date (ibt-134) and Invoice line period end date (ibt-135) are given then the Invoice line period end date (ibt-135) MUST be later or equal to the Invoice line period start date (ibt-134).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-20",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "exists(cbc:StartDate) or exists(cbc:EndDate)",
    "message": "[ibr-co-20]-If Invoice line period (ibg-26) is used, the Invoice line period start date (ibt-134) or the Invoice line period end date (ibt-135) MUST be filled, or both.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-029",
    "flag": "fatal",
    "context": "cac:InvoicePeriod",
    "test": "(exists(cbc:EndDate) and exists(cbc:StartDate) and xs:date(cbc:EndDate) >= xs:date(cbc:StartDate)) or not(exists(cbc:StartDate)) or not(exists(cbc:EndDate))",
    "message": "[ibr-029]-If both Invoicing period start date (ibt-073) and Invoicing period end date (ibt-074) are given then the Invoicing period end date (ibt-074) MUST be later or equal to the Invoicing period start date (ibt-073).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-19",
    "flag": "fatal",
    "context": "cac:InvoicePeriod",
    "test": "exists(cbc:StartDate) or exists(cbc:EndDate) or (exists(cbc:DescriptionCode) and not(exists(cbc:StartDate)) and not(exists(cbc:EndDate)))",
    "message": "[ibr-co-19]-If Invoicing period (ibg-14) is used, the Invoicing period start date (ibt-073) or the Invoicing period end date (ibt-074) MUST be filled, or both.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-054",
    "flag": "fatal",
    "context": "//cac:AdditionalItemProperty",
    "test": "exists(cbc:Name) and exists(cbc:Value)",
    "message": "[ibr-054]-Each Item attribute (ibg-32) MUST contain an Item attribute name (ibt-160) and an Item attribute value (ibt-161).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-065",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode | cac:CreditNoteLine/cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode",
    "test": "exists(@listID)",
    "message": "[ibr-065]-The Item classification identifier (ibt-158) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-064",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:StandardItemIdentification/cbc:ID | cac:CreditNoteLine/cac:Item/cac:StandardItemIdentification/cbc:ID",
    "test": "exists(@schemeID)",
    "message": "[ibr-064]-The Item standard identifier (ibt-157) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-58",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory",
    "test": "exists(cbc:ID)",
    "message": "[ibr-sr-58]-The Invoiced item TAX category code (ibt-151) MUST be present.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-017",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "exists(cac:PartyName/cbc:Name) and (not(cac:PartyName/cbc:Name = ../cac:AccountingSupplierParty/cac:Party/cac:PartyName/cbc:Name) and not(cac:PartyIdentification/cbc:ID = ../cac:AccountingSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID) )",
    "message": "[ibr-017]-The Payee name (ibt-059) MUST be provided in the Invoice, if the Payee (ibg-10) is different from the Seller (ibg-04).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-105",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "(count(cac:PartyIdentification/cbc:ID[upper-case(@schemeID) != 'SEPA']) <= 1) or ((cac:PartyName/cbc:Name) = (../cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName))",
    "message": "[ibr-105]-The Payee identifier (ibt-060) MUST occur maximum once in the Invoice, if the Payee (ibg-10) is different from the Seller (ibg-04).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-106",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "(count(cac:PartyLegalEntity/cbc:CompanyID) <= 1) or ((cac:PartyName/cbc:Name) = (../cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName))",
    "message": "[ibr-106]-The Payee legal identifier (ibt-061) MUST occur maximum once in the Invoice, if the Payee (ibg-10) is different from the Seller (ibg-04).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-19",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "(count(cac:PartyName/cbc:Name) <= 1) or ((cac:PartyName/cbc:Name) = (../cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName))",
    "message": "[ibr-sr-19]-Payee name (ibt-059) MUST occur maximum once, if the Payee is different from the Seller",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-59",
    "flag": "fatal",
    "context": "cac:PaymentMeans/cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cac:Address",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-59]-The Payee Postal Address Line (ibt-174) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-049",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "exists(cbc:PaymentMeansCode)",
    "message": "[ibr-049]-A Payment instruction (ibg-16) MUST specify the Payment means type code (ibt-081).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-27",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cbc:PaymentMeansCode) <= 1)",
    "message": "[ibr-sr-27]-Payment means text (ibt-081) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-28",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cac:PaymentMandate/cbc:ID) <= 1)",
    "message": "[ibr-sr-28]-Mandate reference identifier (ibt-089) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-45",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cbc:PaymentDueDate) <=1)",
    "message": "[ibr-sr-45]-Due Date (ibt-009) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-46",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cbc:PaymentMeansCode/@name) <=1)",
    "message": "[ibr-sr-46]-Payment means text (ibt-082) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-05",
    "flag": "fatal",
    "context": "cac:PaymentTerms",
    "test": "(count(cbc:Note) <= 1)",
    "message": "[ibr-sr-05]-Payment terms (ibt-020) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-60",
    "flag": "fatal",
    "context": "cac:PaymentTerms",
    "test": "(count(cbc:PaymentMeansID) <= 1)",
    "message": "[ibr-sr-60]-Payment Instruction ID (ibt-187) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-055",
    "flag": "fatal",
    "context": "cac:BillingReference",
    "test": "exists(cac:InvoiceDocumentReference/cbc:ID)",
    "message": "[ibr-055]-Each Preceding Invoice reference (ibg-03) MUST contain a Preceding Invoice reference (ibt-025).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-07",
    "flag": "fatal",
    "context": "cac:BillingReference",
    "test": "(cac:InvoiceDocumentReference/cbc:ID)",
    "message": "[ibr-sr-07]-If there is a preceding invoice reference (ibg-03) , the preceding invoice number (ibt-025) MUST be present",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-06",
    "flag": "fatal",
    "context": "cac:BillingReference",
    "test": "(count(cac:InvoiceDocumentReference) <= 1)",
    "message": "[ibr-sr-06]-Preceding invoice reference (ibt-025) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-26",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "exists(cac:PartyTaxScheme/cbc:CompanyID) or exists(cac:PartyIdentification/cbc:ID) or exists(cac:PartyLegalEntity/cbc:CompanyID)",
    "message": "[ibr-co-26]-In order for the buyer to automatically identify a supplier, the Seller identifier (ibt-029), the Seller legal registration identifier (ibt-030) and/or the Seller Tax identifier (ibt-031) MUST be present.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-081",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "cbc:EndpointID",
    "message": "[ibr-081]-The Seller electronic address (ibt-049) MUST be provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-42",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "(count(cac:PartyTaxScheme) <= 2)",
    "message": "[ibr-sr-42]-Party tax scheme MUST occur maximum twice in accounting supplier party",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-062",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cbc:EndpointID",
    "test": "exists(@schemeID)",
    "message": "[ibr-062]-The Seller electronic address (ibt-034) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-009",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cac:PostalAddress",
    "test": "normalize-space(cac:Country/cbc:IdentificationCode) != ''",
    "message": "[ibr-009]-The Seller postal address (ibg-05) MUST contain a Seller country code (ibt-040).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-53",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cac:PostalAddress",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-53]-The Seller Postal Address Line (ibt-162) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-018",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "normalize-space(cac:PartyName/cbc:Name) != ''",
    "message": "[ibr-018]-The Seller tax representative name (ibt-062) MUST be provided in the Invoice, if the Seller (ibg-04) has a Seller tax representative party (ibg-11)",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-019",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "exists(cac:PostalAddress)",
    "message": "[ibr-019]-The Seller tax representative postal address (ibg-12) MUST be provided in the Invoice, if the Seller (ibg-04) has a Seller tax representative party (ibg-11).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-056",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "exists(cac:PartyTaxScheme/cbc:CompanyID)",
    "message": "[ibr-056]-The Seller tax representative party (ibg-11) MUST have a Seller tax representative Tax identifier (ibt-063).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-22",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "(count(cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-sr-22]-Seller tax representative name (ibt-062) MUST occur maximum once, if the Seller has a tax representative",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-23",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "(count(cac:Party/cac:PartyTaxScheme/cbc:CompanyID) <= 1)",
    "message": "[ibr-sr-23]-Seller tax representative tax identifier (ibt-063) MUST occur maximum once, if the Seller has a tax representative",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-020",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty/cac:PostalAddress",
    "test": "normalize-space(cac:Country/cbc:IdentificationCode) != ''",
    "message": "[ibr-020]-The Seller tax representative postal address (ibg-12) MUST contain a Tax representative country code (ibt-069), if the Seller (ibg-04) has a Seller tax representative party (ibg-11).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-55",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty/cac:PostalAddress",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-55]-The Tax Representative Postal Address Line (ibt-164) MUST occur maximum once",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-124",
    "flag": "fatal",
    "context": "/ubl:Invoice/cac:TaxTotal | /cn:CreditNote/cac:Taxtotal",
    "test": "string-length(substring-after(cbc:TaxAmount, '.')) <= 2",
    "message": "[ibr-124]-Invoice total TAX amount (ibt-110) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-14",
    "flag": "fatal",
    "context": "/ubl:Invoice/cac:TaxTotal | /cn:CreditNote/cac:Taxtotal",
    "test": "(xs:decimal(child::cbc:TaxAmount)= round((sum(cac:TaxSubtotal/xs:decimal(cbc:TaxAmount)) * 10 * 10)) div 100) or not(cac:TaxSubtotal)",
    "message": "[ibr-co-14]-Invoice total Tax amount (ibt-110) =  Tax category tax amount (ibt-117).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-32",
    "flag": "fatal",
    "context": "//cac:TaxSubtotal",
    "test": "(count(cac:TaxCategory/cbc:TaxExemptionReason) <= 1)",
    "message": "[ibr-sr-32]-VAT exemption reason text (ibt-120) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-57",
    "flag": "fatal",
    "context": "//cac:PartyTaxScheme",
    "test": "exists(cbc:CompanyID)",
    "message": "[ibr-sr-57]-Company identifier MUST exist in the party tax scheme class.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-073",
    "flag": "fatal",
    "context": "cbc:IssueDate | cbc:DueDate | cbc:TaxPointDate | cbc:StartDate | cbc:EndDate | cbc:ActualDeliveryDate",
    "test": "string-length(text()) = 10 and (string(.) castable as xs:date)",
    "message": "[ibr-073]-A date MUST be formatted YYYY-MM-DD in (ibt-002), (ibt-007), (ibt-009), (ibt-026), (ibt-072), (ibt-073), (ibt-074), (ibt-134), (ibt-135).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-119",
    "flag": "fatal",
    "context": "//*[namespace-uri()='urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2' and ends-with(local-name(), 'Time')]",
    "test": "(string(.) castable as xs:time)",
    "message": "[ibr-119]-A time MUST be formatted hh:mm:ss with optional fractional seconds .sss and time zone expression (ibt-168).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-074",
    "flag": "fatal",
    "context": "//*[ends-with(name(), 'BinaryObject')]",
    "test": "(@mimeCode)",
    "message": "[ibr-074]-Binary object elements (ibt-125) MUST contain the mime code attribute (ibt-125-1).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-075",
    "flag": "fatal",
    "context": "//*[ends-with(name(), 'BinaryObject')]",
    "test": "(@filename)",
    "message": "[ibr-075]-Binary object elements (ibt-125) MUST contain the filename attribute (ibt-125-2).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-077",
    "flag": "fatal",
    "context": "cbc:TaxCurrencyCode",
    "test": "not(normalize-space(text()) = normalize-space(../cbc:DocumentCurrencyCode/text()))",
    "message": "[ibr-077]-Tax accounting currency code (ibt-006) MUST be different from invoice currency code (ibt-005) when provided.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-079",
    "flag": "fatal",
    "context": "//*[not(*) and not(normalize-space())]",
    "test": "false()",
    "message": "[ibr-079]-Document MUST not contain empty elements.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-088",
    "flag": "fatal",
    "context": "cac:Price/cbc:BaseQuantity[@unitCode]",
    "test": "not(../../cbc:InvoicedQuantity or ../../cbc:CreditedQuantity) or (@unitCode = ../../cbc:InvoicedQuantity/@unitCode) or (@unitCode = ../../cbc:CreditedQuantity/@unitCode)",
    "message": "[ibr-088]-Unit code of price base quantity (ibt-150) MUST be same as invoiced quantity (ibt-130).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-092",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:DespatchLineReference/cac:DocumentReference/cbc:ID | cac:CreditNoteLine/cac:DespatchLineReference/cac:DocumentReference/cbc:ID",
    "test": "count(//cac:DespatchDocumentReference) = 0",
    "message": "[ibr-092]-If despatch advice reference exists on line (ibt-184) then there MUST not be despatch reference on document level (ibt-016).",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-62",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:DespatchLineReference | cac:CreditNoteLine/cac:DespatchLineReference",
    "test": "(count(cac:DocumentReference) <= 1)",
    "message": "[ibr-sr-62]-Despatch advice line reference (ibt-184) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-093",
    "flag": "fatal",
    "context": "cac:PrepaidPayment[1]",
    "test": "exists(../cac:LegalMonetaryTotal/cbc:PrepaidAmount)",
    "message": "[ibr-093]-If there is a paid amount (ibt-180) then total paid amount (ibt-113) MUST exist.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-108",
    "flag": "fatal",
    "context": "cac:Delivery",
    "test": "(count(cac:DeliveryParty/cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-108]-Deliver to party name (ibt-070) MUST occur maximum once.",
    "references": [],
    "documentType": "creditnote",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-creditnote/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-010-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"PAS\") or (cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID=\"PAS\" and cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName  and matches(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName, \"^(AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|CV|KH|CM|CA|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|SZ|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|MK|RO|RU|RW|RE|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW)$\"))",
    "message": "[ibr-010-ae]-Passport issuing country code (BTAE-19) MUST be there when Buyer legal registration identifier type (BTAE-16) is 'Passport'",
    "references": [
      "BTAE-19",
      "BTAE-16"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-101-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\" and cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\")",
    "message": "[ibr-101-ae]-Authority name (BTAE-11) MUST be there when Buyer legal registration identifier type (BTAE-16) is Commercial/Trade license.",
    "references": [
      "BTAE-11",
      "BTAE-16"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-136-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "((cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\") and cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) or not(cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\")",
    "message": "[ibr-136-ae]-Buyer legal registration identifier (IBT-047) must be present when Invoice type code [IBT-003] is 'Out of scope of VAT' or 'Credit note related to goods or services'",
    "references": [
      "IBT-047",
      "IBT-003"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-149-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "not(cac:Party/cbc:EndpointID/@schemeID = \"0235\" and cac:Party/cbc:EndpointID != \"1XXXXXXXXX\" and not(cac:Party/cac:PartyTaxScheme/cbc:CompanyID))",
    "message": "[ibr-149-ae]-The buyer legal registration identifier (IBT-048) MUST be provided when the scheme identifier (IBT-049-1) is '0235' and buyer electronic address (IBT-049) is not '1XXXXXXXXX'",
    "references": [
      "IBT-048",
      "IBT-049"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-179-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "count(cac:PartyTaxScheme/cbc:CompanyID) <=1",
    "message": "[ibr-179-ae]-Buyer tax identifier (IBT-048) MUST occur maximum once",
    "references": [
      "IBT-048"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-135-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "((cac:PartyIdentification/cbc:ID or cac:PartyTaxScheme/cbc:CompanyID) and (not(matches(../../cbc:ProfileExecutionID, \"^\\d{7}1$\")) and cbc:EndpointID/@schemeID = \"0235\" and not(matches(cbc:EndpointID, \"^1\\d{9}$\")))) or not(not(matches(../../cbc:ProfileExecutionID, \"^\\d{7}1$\")) and cbc:EndpointID/@schemeID = \"0235\" and not(matches(cbc:EndpointID, \"^1\\d{9}$\")))",
    "message": "[ibr-135-ae]-Either Buyer identifier (IBT-046) or Buyer tax identifier (IBT-048 ) MUST be present when the Invoice transaction type code [BTAE-02] is other than XXXXXXX1 (Exports) and scheme identifier (IBT-049-1) is '0235' and buyer electronic address (IBT-049) is not '1XXXXXXXXX'",
    "references": [
      "IBT-046",
      "IBT-048",
      "BTAE-02",
      "IBT-049"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-180-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "not(cbc:EndpointID[@schemeID = \"0235\"] and cac:PartyLegalEntity/cbc:CompanyID) or cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID",
    "message": "[ibr-180-ae]-When Scheme identifier (IBT-049-1) is '0235' and Buyer legal registration identifier (ibt-047) is provided, then Buyer legal registration identifier type (BTAE-16) MUST be present",
    "references": [
      "IBT-049",
      "BTAE-16"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-196-ae",
    "flag": "fatal",
    "context": "cac:DeliveryTerms",
    "test": "exists(cbc:ID)",
    "message": "[ibr-196-ae]- The Incoterms (BTAE-22) must be provided.",
    "references": [
      "BTAE-22"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-144-ae",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cac:PostalAddress",
    "test": "(cbc:StreetName) and (cbc:CityName) and (cbc:CountrySubentity)",
    "message": "[ibr-144-ae]-In Buyer postal address (IBG-08), Address line 1 (IBT-050), Buyer city (IBT-052) and Buyer country subdivision (IBT-054) must be provided",
    "references": [
      "IBG-08",
      "IBT-050",
      "IBT-052",
      "IBT-054"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-143-ae",
    "flag": "fatal",
    "context": "cac:AccountingBuyerParty/cac:Party/cac:PostalAddress",
    "test": "(cbc:StreetName) and (cbc:CityName) and (cbc:CountrySubentity)",
    "message": "[ibr-143-ae]-In Seller postal address (IBG-05), Seller address line 1 (IBT-035), Seller city (IBT-037) and Seller to country subdivision (IBT-039) must be provided.",
    "references": [
      "IBG-05",
      "IBT-035",
      "IBT-037",
      "IBT-039"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-012-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"PAS\") or (cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID=\"PAS\" and cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName  and matches(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName, \"^(AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|CV|KH|CM|CA|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|SZ|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|MK|RO|RU|RW|RE|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW)$\"))",
    "message": "[ibr-012-ae]-Passport issuing country code (BTAE-18) MUST be there when Seller legal registration identifier type (BTAE-15) is 'Passport'",
    "references": [
      "BTAE-18",
      "BTAE-15"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-172-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\" and (cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyName)) or not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = \"TL\")",
    "message": "[ibr-172-ae]-Authority name (BTAE-12) MUST be there when the value in Seller legal registration identifier type (BTAE-15) is Commercial/Trade license.",
    "references": [
      "BTAE-12",
      "BTAE-15"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-177-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\")) or cac:PartyTaxScheme/cbc:CompanyID != cac:PartyIdentification/cbc:ID",
    "message": "[ibr-177-ae]-Either Seller tax registration identifier (IBT-032) or Seller tax identifier (IBT-031) MUST be provided",
    "references": [
      "IBT-032",
      "IBT-031"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-178-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "(count(cac:PartyTaxScheme) = 2 and count(cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = \"VAT\"]) = 1) or count(cac:PartyTaxScheme) < 2",
    "message": "[ibr-178-ae]-Tax scheme code, if provided in (IBT-031-1) shall be '!VAT' when Seller tax registration identifier (IBT-032) is provided",
    "references": [
      "IBT-031",
      "IBT-032"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-150-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cac:Party/cbc:EndpointID/@schemeID = \"0235\" and not(cac:Party/cac:PartyLegalEntity/cbc:CompanyID))",
    "message": "[ibr-150-ae]-The Seller legal registration identifier (IBT-030) MUST be provided when the scheme identifier (IBT-034-1) is '0235'",
    "references": [
      "IBT-030",
      "IBT-034"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-173-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID and  cbc:EndpointID/@schemeID = \"0235\" and cac:PostalAddress/cac:Country/cbc:IdentificationCode = \"AE\" and  not(cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = (\"TL\", \"EID\", \"PAS\", \"CD\")))",
    "message": "[ibr-173-ae]-The value in Seller legal registration identifier type [BTAE-15] Scheme identifier [IBT-030-1] should either be 'Commercial/Trade license' or 'Emirates ID' or 'Passport' or 'Cabinet decision' when the value in Seller legal registration identifier (IBT-030) is provided and scheme identifier (IBT-034-1) is '0235' and the Seller country code (IBT-055) is AE.",
    "references": [
      "BTAE-15",
      "IBT-030",
      "IBT-034",
      "IBT-055"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-181-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "not(cbc:EndpointID[@schemeID = \"0235\"]) or not(cac:PartyLegalEntity/cbc:CompanyID) or  cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID",
    "message": "[ibr-181-ae]-When Scheme identifier (IBT-034-1) is '0235' and Seller legal registration identifier (ibt-030) is provided, then Seller legal registration identifier type (BTAE-15) MUST be present",
    "references": [
      "IBT-034",
      "BTAE-15"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-004",
    "flag": "fatal",
    "context": "cac:Price/cac:AllowanceCharge",
    "test": "not(cbc:BaseAmount) or xs:decimal(../cbc:PriceAmount) = xs:decimal(cbc:BaseAmount) - xs:decimal(cbc:Amount)",
    "message": "[aligned-ibrp-004]-Item net price (ibt-146) MUST equal (Gross price (ibt-148) - Price discount (ibt-147)) when gross price is provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-126-ae",
    "flag": "fatal",
    "context": "cac:Price",
    "test": "boolean(cbc:BaseQuantity) and boolean(cac:AllowanceCharge/cbc:BaseAmount)",
    "message": "[ibr-126-ae]-In Price Details (IBG-29), Item price base quantity (IBT-149) and Item Gross Price (IBT-148) MUST be there.",
    "references": [
      "IBG-29",
      "IBT-149",
      "IBT-148"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-192-ae",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "not(cbc:PaymentMeansTypeCode = \"30\") or cac:PayeeFinancialAccount/cbc:ID",
    "message": "[ibr-192-ae]- when Payment means type code (ibt-081) is 'credit transfer' then Payment account identifier (ibt-084) must be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-128-ae",
    "flag": "fatal",
    "context": "cac:PostalAddress",
    "test": "(cac:Country/cbc:IdentificationCode=\"AE\" and cbc:CountrySubentity = (\"AUH\", \"DXB\", \"SHJ\", \"UAQ\", \"FUJ\", \"AJM\", \"RAK\")) or not(cac:Country/cbc:IdentificationCode=\"AE\")",
    "message": "[ibr-128-ae]-When Country code (IBT-040, IBT-055, IBT-069, IBT-080) is AE, then country subdivision (IBT-039, IBT-054, IBT-068, IBT-079) should be one among one of these (AUH, DXB, SHJ, UAQ, FUJ, AJM, RAK).",
    "references": [
      "IBT-040",
      "IBT-055",
      "IBT-069",
      "IBT-080",
      "IBT-039",
      "IBT-054",
      "IBT-068",
      "IBT-079"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-032",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(parent::ubl:Invoice|parent::cn:CreditNote) or exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID)",
    "message": "[aligned-ibrp-032]-Each Document level allowance (ibg-20) MUST have a Document level allowance VAT category code (ibt-095).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-057",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(cbc:MultiplierFactorNumeric or cbc:BaseAmount) or (cbc:MultiplierFactorNumeric and cbc:BaseAmount)",
    "message": "[aligned-ibrp-057]-Either both or neither Allowance base amount (ibt-093) and percentage (ibt-094) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-131-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(exists(cbc:BaseAmount) and exists(cbc:MultiplierFactorNumeric)) or (cbc:Amount = round(cbc:BaseAmount * cbc:MultiplierFactorNumeric) div 100)",
    "message": "[ibr-131-ae]-Allowance amount (IBT-092, IBT-136) must equal base amount (IBT-093, IBT-137) * percentage (IBT-094, IBT-138) /100 if base amount and percentage exists",
    "references": [
      "IBT-092",
      "IBT-136",
      "IBT-093",
      "IBT-137",
      "IBT-094",
      "IBT-138"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-115-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(cac:CategoryCode/cbc:ID = \"N\")",
    "message": "[ibr-115-ae]-[ibr-115-ae]-Document level allowance tax category code (IBT-095) cannot be 'Standard rate additional VAT'.",
    "references": [
      "IBT-095"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-168-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "not(cac:TaxCategory/cbc:ID = \"E\" and not(exists(cbc:AllowanceChargeReasonCode)))",
    "message": "[ibr-168-ae]-Document level allowances (IBG-20) with Document level allowance VAT category code (IBT-095) as 'Exempt from VAT' MUST have a Document level allowance VAT exemption reason code (IBT-196)",
    "references": [
      "IBG-20",
      "IBT-095",
      "IBT-196"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-037",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(parent::ubl:Invoice|parent::cn:CreditNote) or exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID)",
    "message": "[aligned-ibrp-037]-Each Document level charge (ibg-21) MUST have a Document level charge VAT category code (ibt-102).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-058",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(cbc:MultiplierFactorNumeric or cbc:BaseAmount) or (cbc:MultiplierFactorNumeric and cbc:BaseAmount)",
    "message": "[aligned-ibrp-058]-Either both or neither Charge base amount (ibt-100) and percentage (ibt-101) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-146-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(exists(cbc:BaseAmount) and exists(cbc:MultiplierFactorNumeric)) or (cbc:Amount = (cbc:BaseAmount * cbc:MultiplierFactorNumeric) div 100)",
    "message": "[ibr-146-ae]-Charge amount (IBT-099, IBT-141) must equal base amount (IBT-100, IBT-142) * percentage (IBT-101, IBT-143) /100 if base amount and percentage exists",
    "references": [
      "IBT-099",
      "IBT-141",
      "IBT-100",
      "IBT-142",
      "IBT-101",
      "IBT-143"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-114-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(cac:CategoryCode/cbc:ID = \"N\")",
    "message": "[ibr-114-ae]-Document level charge VAT category code (IBT-102) cannot be 'Standard rate additional VAT'.",
    "references": [
      "IBT-102"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-169-ae",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "not(cac:TaxCategory/cbc:ID = \"E\" and not(exists(cbc:AllowanceChargeReasonCode)))",
    "message": "[ibr-169-ae]-Document level charge (IBG-21) with Document level charge VAT category code (IBT-102) as 'Exempt from VAT' MUST have a Document level charge VAT exemption reason code (IBT-198).",
    "references": [
      "IBG-21",
      "IBT-102",
      "IBT-198"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-002-ae",
    "flag": "fatal",
    "context": "cbc:CalculationRate",
    "test": "not(matches(., \"^\\d+(\\.\\d{7})?$\"))",
    "message": "[ibr-002-ae]-Currency exchange rate [BTAE-04] should contain the values till maximum of 6 decimal places.",
    "references": [
      "BTAE-04"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-104-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "not(exists(cac:Item/cac:ClassifiedTaxCategory)) or (exists(cac:Item/cac:ClassifiedTaxCategory) and exists(cac:ItemPriceExtension/cac:TaxTotal/cbc:TaxAmount) and exists(cac:ItemPriceExtension/cbc:Amount))",
    "message": "[ibr-104-ae]-An Invoice line (IBG-25), where Line VAT Information (IBG-30) is present then Invoice line amount in AED (BTAE-10) and VAT Line amount in AED (BTAE-08) must be provided.",
    "references": [
      "IBG-25",
      "IBG-30",
      "BTAE-10",
      "BTAE-08"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-111-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Item/cac:ClassifiedTaxCategory/cbc:ID=\"N\" and cac:Item/cac:ClassifiedTaxCategory/cbc:Percent > 0) or not(cac:Item/cac:ClassifiedTaxCategory/cbc:ID=\"N\")",
    "message": "[ibr-111-ae]-An Invoice line (IBG-25) where the VAT category code (IBT-151) is 'Standard rate additional VAT' the Invoiced item VAT rate (IBT-152) should not be zero.",
    "references": [
      "IBG-25",
      "IBT-151",
      "IBT-152"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-145-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Item/cac:ClassifiedTaxCategory)",
    "message": "[ibr-145-ae]-Each Invoice line (IBG-25) MUST be categorized with an Invoiced item tax category code (IBT-151)..",
    "references": [
      "IBG-25",
      "IBT-151"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-147-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "round(cbc:LineExtensionAmount * 100) div 100 = round((((cbc:InvoicedQuantity | cbc:CreditedQuantity) * (cac:Price/cbc:PriceAmount div cac:Price/cbc:BaseQuantity)) + sum(cac:AllowanceCharge[cbc:ChargeIndicator=\"true\"]/cbc:Amount) - sum(cac:AllowanceCharge[cbc:ChargeIndicator=\"false\"]/cbc:Amount)) * 100) div 100",
    "message": "[ibr-147-ae]-Invoice line net amount (IBT-131) MUST equal (Invoiced quantity (IBT-129) * (Item net price (IBT-146)/item price base quantity (IBT-149)) + Sum of invoice line charge amount (IBT-141) - sum of invoice line allowance amount (IBT-136).",
    "references": [
      "IBT-131",
      "IBT-129",
      "IBT-146",
      "IBT-149",
      "IBT-141",
      "IBT-136"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-167-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "not(cac:Item/cac:ClassifiedTaxCategory/cbc:ID = \"E\" and not(exists(cac:Item/cac:ClassifiedTaxCategory/cbc:TaxExemptionReasonCode)))",
    "message": "[ibr-167-ae]-Line VAT information (IBG-30) with Invoiced item VAT category code (IBT-151) as 'Exempt from VAT' MUST have a VAT exemption reason code (IBT-186).",
    "references": [
      "IBG-30",
      "IBT-151",
      "IBT-186"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-123-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "((../cbc:InvoiceTypeCode = \"81\" or ../cbc:InvoiceTypeCode = \"480\") and count(cac:Item/cac:ClassifiedTaxCategory) = 1) or not(../cbc:InvoiceTypeCode = \"81\" or ../cbc:InvoiceTypeCode = \"480\")",
    "message": "[ibr-123-ae]- Line VAT Information (IBG - 30) MUST be there and can occur maximum once except in case when invoice type code is 'Out of scope of VAT' or 'Credit note related to goods or services'.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-194-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cac:ItemPriceExtension/cbc:Amount)",
    "message": "[ibr-194-ae]- Invoice line Amount payable (BTAE-10) must be provided.",
    "references": [
      "BTAE-10"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-001-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "starts-with(normalize-space(cbc:CustomizationID/text()), 'urn:peppol:pint:billing-1@ae-1') or starts-with(normalize-space(cbc:CustomizationID/text()), 'urn:peppol:pint:selfbilling-1@ae-1')",
    "message": "[aligned-ibrp-001-ae]-Specification identifier (ibt-024) MUST start with the value 'urn:peppol:pint:billing-1@ae-1' or 'urn:peppol:pint:selfbilling-1@ae-1'.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-002-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "/*/cbc:ProfileID and (matches(normalize-space(/*/cbc:ProfileID), 'urn:peppol:bis:billing') or matches(normalize-space(/*/cbc:ProfileID), 'urn:peppol:bis:selfbilling'))",
    "message": "[aligned-ibrp-002-ae]-Business process (ibt-023) MUST be in the format 'urn:peppol:bis:billing' or 'urn:peppol:bis:selfbilling'.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']) = 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'E']))",
    "message": "[aligned-ibrp-e-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Exempt from VAT\" MUST contain exactly one VAT breakdown (ibg-23) with the VAT category code (ibt-118) equal to \"Exempt from VAT\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']) = 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'O']))",
    "message": "[aligned-ibrp-o-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Not subject to VAT\" MUST contain exactly one VAT breakdown group (ibg-23) with the VAT category code (ibt-118) equal to \"Not subject to VAT\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((count(//cac:AllowanceCharge/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) + count(//cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'])) > 0 and count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) > 0) or ((count(//cac:AllowanceCharge/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) + count(//cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'])) = 0 and count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S']) = 0)",
    "message": "[aligned-ibrp-s-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Standard rated\" MUST contain in the VAT breakdown (ibg-23) at least one VAT category code (ibt-118) equal with \"Standard rated\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-01",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']) = 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'Z']))",
    "message": "[aligned-ibrp-z-01]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-95 or ibt-102) is \"Zero rated\" MUST contain in the VAT breakdown (ibg-23) exactly one VAT category code (ibt-118) equal with \"Zero rated\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-01-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']) or exists(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE'])) and (count(cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']) >= 1)) or (not(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']) and not(//cac:ClassifiedTaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID[normalize-space(.) = 'AE']))",
    "message": "[aligned-ibrp-ae-01-ae]-An Invoice that contains an Invoice line (ibg-25), a Document level allowance (ibg-20) or a Document level charge (ibg-21) where the VAT category code (ibt-151, ibt-095 or ibt-102) is \"Reverse charge\" MUST contain in the VAT Breakdown (ibg-23) at least one VAT category code (ibt-118) equal with \"VAT reverse charge\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-sr-12",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[cac:TaxScheme/upper-case(cbc:ID)='VAT']/cbc:CompanyID) <= 1)",
    "message": "[aligned-ibrp-sr-12]-Seller tax identifier (ibt-031) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-007-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^1[01]{6}$\")) or cac:BuyerCustomerParty/cac:Party/cac:PartyIdentification/cbc:ID",
    "message": "[ibr-007-ae]-When Invoice Transaction-type code (BTAE-02) has value 1XXXXXXX (Free trade zone), then providing value in Beneficiary ID (BTAE-01) MUST be provided.",
    "references": [
      "BTAE-02",
      "BTAE-01"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-134-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(not(cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\") and cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[cac:TaxScheme/cbc:ID = \"VAT\"]/cbc:CompanyID) or (cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\")",
    "message": "[ibr-134-ae]-Seller tax Identifier (IBT-031) MUST be there, except when the Invoice type code (IBT-003) is 'Out of scope of VAT' or 'Credit note related to goods or services'.",
    "references": [
      "IBT-031",
      "IBT-003"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-137-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\") and cac:SellerSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID) or not(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\"))",
    "message": "[ibr-137-ae]-Principle ID (BTAE-14) is MUST, where Invoice transaction type code [BT-UAE-002] is XXXXX1XX (Disclosed Agent billing).",
    "references": [
      "BTAE-14"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-138-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(matches(cbc:ProfileExecutionID, \"^[01]{3}1[01]{4}$\") and cac:InvoicePeriod) or not(matches(cbc:ProfileExecutionID, \"^[01]{3}1[01]{4}$\"))",
    "message": "[ibr-138-ae]-Invoicing period [IBG-14] is MUST, where Invoice transaction type code [BTAE-002] is XXX1XXXX (Summary invoice).",
    "references": [
      "IBG-14",
      "BTAE-002"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-141-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxPointDate) or cbc:TaxPointDate < cbc:IssueDate",
    "message": "[ibr-141-ae]-When, Tax point date [IBT-007] is present, it should be before the Invoice issue date [IBT-002].",
    "references": [
      "IBT-007",
      "IBT-002"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-055-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((cbc:InvoiceTypeCode = \"381\" or cbc:InvoiceTypeCode = \"81\") and (((cac:BillingReference) and  (cac:DiscrepancyResponse/cbc:ResponseCode != \"VD\")) or (not(cac:BillingReference) and  (cac:DiscrepancyResponse/cbc:ResponseCode = \"VD\"))))  or not(cbc:InvoiceTypeCode = \"381\" or cbc:InvoiceTypeCode = \"81\")",
    "message": "[ibr-055-ae]-Preceding invoice reference (IBG-03) is must when invoice type code (IBT-003) is 381 (Credit note) or 81 (Credit note related to goods or services) except when the [BTAE-03] Credit note reason code is 'VD'.",
    "references": [
      "IBG-03",
      "IBT-003",
      "BTAE-03"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-142-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^[01]{6}1[01]$\")) or (cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:StreetName and cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CityName and  cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CountrySubentity)",
    "message": "[ibr-142-ae]-In Delivery Information (ibg-13), Deliver to address line 1 (IBT-075), Deliver to city (IBT-077), Deliver to country subdivision (IBT-079) MUST be there, in case the Invoice transaction type code [BTAE-02] is XXXXXX1X (E-commerce supplies).",
    "references": [
      "IBT-075",
      "IBT-077",
      "IBT-079",
      "BTAE-02"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-105-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))=\"VAT\"]/cbc:ID[normalize-space(.) = \"N\"]) and (count(//cac:TaxTotal/cac:TaxSubtotal) = 1)) or not(exists(//cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))=\"VAT\"]/cbc:ID[normalize-space(.) = \"N\"]))",
    "message": "[ibr-105-ae]-An Invoice that contains an Invoice line (IBG-25), where the VAT category code (IBT-151) is 'Standard rate additional VAT' shall contain exactly one VAT breakdown group (IBG-23) with the VAT category code (IBT-118) equal to 'Standard rate additional VAT'.",
    "references": [
      "IBG-25",
      "IBT-151",
      "IBG-23",
      "IBT-118"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-122-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((cbc:InvoiceTypeCode = \"81\" or cbc:InvoiceTypeCode = \"480\") and (//cac:TaxCategory/cbc:ID = \"E\" or //cac:TaxCategory/cbc:ID = \"O\" or //cac:TaxCategory/cbc:ID = \"Z\") and (//cac:ClassifiedTaxCategory/cbc:ID = \"E\" or //cac:ClassifiedTaxCategory/cbc:ID = \"O\"  or //cac:ClassifiedTaxCategory/cbc:ID = \"Z\")) or not(cbc:InvoiceTypeCode = \"81\" or cbc:InvoiceTypeCode = \"480\")",
    "message": "[ibr-122-ae]-When Invoice type code (IBT-003) is 'Out of scope of VAT' or 'Credit note related to goods or services', then the Document level allowance VAT category code (IBT-095), Document level charge VAT category code (IBT-102), Invoiced item VAT category code (IBT-151) MUST be either 'Exempt from VAT' and/or 'Not subject to VAT' and/or 'Zero rated'.",
    "references": [
      "IBT-003",
      "IBT-095",
      "IBT-102",
      "IBT-151"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-124-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:InvoiceTypeCode = \"381\" or cbc:InvoiceTypeCode = \"81\") or not(cbc:TaxPointDate)",
    "message": "[ibr-124-ae]-Tax point date [IBT-007] MUST not be there when invoice type code (IBT-003) is 'credit note' or 'Credit note related to goods or services'.",
    "references": [
      "IBT-007",
      "IBT-003"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-127-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "((cbc:InvoiceTypeCode | cbc:CreditNoteTypeCode) = \"381\" or (cbc:InvoiceTypeCode | cbc:CreditNoteTypeCode) = \"81\" or (cbc:CreditNoteTypeCode) = \"261\") or (matches(cbc:ProfileExecutionID, \"^[01]1[01]{6}$\")) or (cac:LegalMonetaryTotal/cbc:PayableAmount > 0 and (cbc:DueDate))",
    "message": "[ibr-127-ae]-Payment due date [IBT-009] MUST be present when the amount due for payment (IBT-115) greater than 0, except when invoice type code (IBT-003) is 'Credit note' or 'Credit note related to goods or services' or Invoice transaction-type code (BTAE-002) is X1XXXXXX (Deemed supply) .",
    "references": [
      "IBT-009",
      "IBT-115",
      "IBT-003",
      "BTAE-002"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-116-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^[01]{2}1[01]{5}$\")) or not(//cac:TaxCategoryCode/cbc:ID = \"N\")",
    "message": "[ibr-116-ae]-When Invoice transaction-type code (BTAE-02) has value XX1XXXXX (Margin scheme), then the tax category code (IBT-151) should have 'Standard rate additional VAT '.",
    "references": [
      "BTAE-02",
      "IBT-151"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-151-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not((cbc:InvoiceTypeCode = \"380\" or cbc:InvoiceTypeCode = \"381\") and not(cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory/cbc:ID != \"E\" and cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory/cbc:ID != \"O\"))",
    "message": "[ibr-151-ae]-When Invoice type code (IBT-003) is 'Commercial invoice' or 'Credit note', Invoiced item VAT category code (IBT-151) should not only contain 'Exempt from VAT' and/or 'Not subject to VAT'.",
    "references": [
      "IBT-003",
      "IBT-151"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-152-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(matches(cbc:ProfileExecutionID, \"^.{7}1$\")) or (cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:StreetName and cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CityName and  cac:Delivery/cac:DeliveryLocation/cac:Address/cbc:CountrySubentity)",
    "message": "[ibr-152-ae]-In Delivery Information (IBG-13), Deliver to address line 1 (IBT-075), deliver to city (IBT-077), deliver to country subdivision (IBT-079) MUST be there, in case the Invoice transaction type code [BTAE-002] is XXXXXXX1 (Exports) and the deliver to country code [IBT-080] should not be 'AE'.",
    "references": [
      "IBG-13",
      "IBT-075",
      "IBT-077",
      "IBT-079",
      "BTAE-002",
      "IBT-080"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-153-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxCurrencyCode = \"AED\" and cbc:DocumentCurrencyCode != \"AED\" and (not(cac:PricingExchangeRate/cbc:SourceCurrencyCode = cbc:DocumentCurrencyCode) or not(cac:PricingExchangeRate/cbc:TargetCurrencyCode = cbc:TaxCurrencyCode) or not(cac:PricingExchangeRate/cbc:CalculationRate)))",
    "message": "[ibr-153-ae] When the VAT accounting currency (IBT-006) is set to AED and the invoice currency code (IBT-005) differs from AED, the source currency must be designated as the invoice currency code (IBT-005), and the target currency must be specified as the VAT accounting currency (IBT-006), provided that the currency exchange rate (BTAE-04) is available.",
    "references": [
      "IBT-006",
      "IBT-005",
      "BTAE-04"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-157-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not((cbc:InvoiceTypeCode = \"480\" or cbc:InvoiceTypeCode = \"81\") and  matches(cbc:ProfileExecutionID, \"^[01]{2}1[01]{5}$|^[01]1[01]{6}$|^[01]{3}1[01]{4}$\"))",
    "message": "[ibr-157-ae]-Invoice Transaction-type code (BTAE-02) cannot be XXX1XXXX (Summary invoice) or X1XXXXXX (Deemed supply) or XX1XXXXX (Margin scheme) when the invoice type code (IBT-003) is 'Out of scope of VAT' or 'Credit note related to goods or services'.",
    "references": [
      "BTAE-02",
      "IBT-003"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-158-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:InvoiceTypeCode = \"381\" and not(exists(cac:DiscrepancyResponse/cbc:ResponseCode)))",
    "message": "[ibr-158-ae]-Where the Invoice type code [IBT-003] is 'Credit note', Credit note reason code [BTAE-03] MUST be there .",
    "references": [
      "IBT-003",
      "BTAE-03"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-159-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(cbc:DocumentCurrencyCode != \"AED\" and (exists(//cbc:CalculationRate))) or cbc:DocumentCurrencyCode = \"AED\"",
    "message": "[ibr-159-ae]-Currency exchange rate [BTAE-04] is MUST when then Invoice currency code [IBT-005] is different from 'AED'.",
    "references": [
      "BTAE-04",
      "IBT-005"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-160-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cac:InvoicePeriod/cbc:DescriptionCode = \"OTH\" and not(exists(cbc:Note)))",
    "message": "[ibr-160-ae]-When Frequency of billing (BTAE-06) value is 'Others', then value should be provided in Invoice note (IBT-022).",
    "references": [
      "BTAE-06",
      "IBT-022"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-175-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "cbc:DocumentCurrencyCode = \"AED\" or (cbc:DocumentCurrencyCode != \"AED\" and cbc:TaxCurrencyCode = \"AED\" and exists(cac:TaxTotal/cbc:TaxAmount[@currencyID = \"AED\"]) and exists(cac:AdditionalDocumentReference[cbc:DocumentTypeCode = \"aedtotal-incl-vat\"]/cbc:DocumentDescription))",
    "message": "[ibr-175-ae]-When Invoice currency code [IBT-005] is other than 'AED' and Tax accounting currency [IBT-006] is 'AED', then the value in Invoice total VAT amount in VAT accounting currency [IBT-111] and Invoice total amount with VAT in tax accounting currency [BTAE-20] MUST be present.",
    "references": [
      "IBT-005",
      "IBT-006",
      "IBT-111",
      "BTAE-20"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-176-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\") and cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID !=  cac:SellerSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID) or not(matches(cbc:ProfileExecutionID, \"^[01]{5}1[01]{2}$\"))",
    "message": "[ibr-176-ae]-When Invoice transaction type code [BTAE-02] is XXXXX1XX (Disclosed agent billing), then the value in field Seller tax Identifier [IBT-031] and Principle ID [BTAE-14] should not be the same.",
    "references": [
      "BTAE-02",
      "IBT-031",
      "BTAE-14"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-183-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cac:PartyLegalEntity/cbc:CompanyID) or not(cbc:EndpointID[@schemeID = \"0235\"]) or  starts-with(cbc:EndpointID, \"1\") or cac:PartyLegalEntity/cbc:CompanyID/@schemeAgencyID = (\"CL\", \"EID\", \"PAS\", \"CD\")",
    "message": "[ibr-183-ae]-The value in Buyer legal registration identifier type [BTAE-16] should either be 'Commercial/Trade license' or 'Emirates ID' or 'Passport' or 'Cabinet decision' when Buyer legal registration identifier (IBT-047) is provided and scheme identifier (IBT-049-1) is '0235' and buyer electronic address (IBT-049) is not '1XXXXXXXXX'.",
    "references": [
      "BTAE-16",
      "IBT-047",
      "IBT-049"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-190-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(//cac:TaxCategory/cbc:ID = \"S\") or //cac:TaxCategory[cbc:ID = \"S\"]/cbc:Percent = 5.00",
    "message": "[ibr-190-ae]- When the Invoiced item VAT category code (ibt-151), Document level allowance VAT category code (ibt-095), Document level charge VAT category code (ibt-102) is Standard rated then Invoiced item VAT rate (ibt-152), Document level allowance VAT rate (ibt-096), Document level charge VAT rate (ibt-103) must be 5.00.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-191-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:PaymentMeans/cbc:PaymentMeansCode) = not((cbc:InvoiceTypeCode|cbc:CreditNoteTypeCode) = \"81\" or (cbc:InvoiceTypeCode|cbc:CreditNoteTypeCode) = \"381\" or  (cbc:InvoiceTypeCode|cbc:CreditNoteTypeCode) = \"261\"or matches(cbc:ProfileExecutionID, \"^\\d1\\d{6}$\"))",
    "message": "[ibr-191-ae]- Payment means type code (ibt-081) must be provided except when the invoice type code (ibt-003) is 'Credit note' or 'Credit note related to goods or Invoice transaction-type code (BTAE-002) is X1XXXXXX (Deemed supply) .",
    "references": [
      "BTAE-002"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-154-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "string-length(cbc:ProfileExecutionID) <= 8 and (matches(cbc:ProfileExecutionID, \"^[01]{1,8}$\"))",
    "message": "[ibr-154-ae]-Invoice Transaction-type code (BTAE-02) must be provided from the Invoice Transaction Type Code List. It should be a string consisting of no more than 8 characters, exclusively comprising of 0 and 1. The value in this field should be based on the sequence of transaction present in the invoice (as per list order), If applicable '1', and if not applicable '0' .",
    "references": [
      "BTAE-02"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-140-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxCurrencyCode) or cbc:TaxCurrencyCode = \"AED\"",
    "message": "[ibr-140-ae]-When VAT accounting currency (IBT-006) is present, it shall be AED.",
    "references": [
      "IBT-006"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-193-ae",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cbc:UUID)",
    "message": "[ibr-193-ae]- The unique identifier number (BTAE-07) must be provided.",
    "references": [
      "BTAE-07"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-125-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "boolean(cbc:Description)",
    "message": "[ibr-125-ae]-In Item Information(IBG-31), Item description (IBT-154) MUST be there.",
    "references": [
      "IBG-31",
      "IBT-154"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-166-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:ClassifiedTaxCategory/cbc:ID = \"AE\" and (exists(cac:InvoiceLine/cac:Item/cac:CommodityClassification/cbc:NatureCode))) or cac:ClassifiedTaxCategory/cbc:ID != \"AE\"",
    "message": "[ibr-166-ae]-In Item information (IBG-31) where Invoiced VAT category code (IBT-151) is 'Reverse charge', Type of goods or services (BTAE-09) MUST be there.",
    "references": [
      "IBG-31",
      "IBT-151",
      "BTAE-09"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-184-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:CommodityCode = \"G\") or cac:CommodityClassification/cbc:ItemClassificationCode",
    "message": "[ibr-184-ae]-When the Item type [BTAE-13] is 'Goods' then Item classification identifier (ibt-158) must be provided. .",
    "references": [
      "BTAE-13"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-185-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:CommodityCode = \"S\") or cac:AdditionalItemIdentification/cbc:ID",
    "message": "[ibr-185-ae]-When the Item type [BTAE-13] is 'Services' then Service accounting code (BTAE-17) must be provided. .",
    "references": [
      "BTAE-13",
      "BTAE-17"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-186-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:CommodityCode = \"B\") or cac:CommodityClassification/cbc:ItemClassificationCode or cac:AdditionalItemIdentification/cbc:ID",
    "message": "[ibr-186-ae]-When the Item type [BTAE-13] is 'Both' then Item classification identifier (ibt-158) and Service accounting code (BTAE-17) must be provided. .",
    "references": [
      "BTAE-13",
      "BTAE-17"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-187-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "true()",
    "message": "[ibr-187-ae]- The minimum number of digits to be provided should be 'X' in Item classification identifier (ibt-158) and Service accounting code (BTAE-17).",
    "references": [
      "BTAE-17"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-188-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:CommodityClassification/cbc:ItemClassificationCode) or cac:CommodityClassification/cbc:ItemClassificationCode/@listID = \"HS\"",
    "message": "[ibr-188-ae]- The scheme identifier (ibt-158-1) MUST be HS when Item classification identifier (ibt-158) is provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-189-ae",
    "flag": "fatal",
    "context": "cac:Item",
    "test": "not(cac:AdditionalItemIdentification/cbc:ID) or cac:AdditionalItemIdentification/cbc:ID/@schemeID = \"SAC\"",
    "message": "[ibr-189-ae]- The scheme identifier (BTAE-17-1) MUST be SAC when Service accounting code (BTAE-17) is provided.",
    "references": [
      "BTAE-17"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-045",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cbc:TaxableAmount)",
    "message": "[aligned-ibrp-045]-Each VAT breakdown (ibg-23) MUST have a VAT category taxable amount (ibt-116).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-046",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cbc:TaxAmount)",
    "message": "[aligned-ibrp-046]-Each VAT breakdown (ibg-23) MUST have a VAT category tax amount (ibt-117).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-047",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:ID)",
    "message": "[aligned-ibrp-047]-Each VAT breakdown (ibg-23) MUST be defined through a VAT category code (ibt-118).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-048",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:Percent) or (cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/normalize-space(cbc:ID)='O')",
    "message": "[aligned-ibrp-048]-Each VAT breakdown (ibg-23) MUST have a VAT category rate (ibt-119), except if the Invoice is not subject to VAT.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-119-ae",
    "flag": "fatal",
    "context": "cac:TaxSubtotal",
    "test": "(cac:TaxCategory/cbc:ID = \"O\") and not(cac:TaxCategory/cbc:Percent) or  (not(cac:TaxCategory/cbc:ID = \"O\")) and cac:TaxCategory/cbc:Percent",
    "message": "[ibr-119-ae]-Each VAT breakdown (IBG-23) shall have a VAT category rate (IBT-119), except if the Invoice is not subject to VAT.",
    "references": [
      "IBG-23",
      "IBT-119"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) > 0)",
    "message": "[aligned-ibrp-s-05]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Standard rated\" the Invoiced item VAT rate (ibt-152) MUST be greater than zero.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) > 0)",
    "message": "[aligned-ibrp-s-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Standard rated\" the Document level allowance VAT rate (ibt-96) MUST be greater than zero.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) > 0)",
    "message": "[aligned-ibrp-s-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Standard rated\" the Document level charge VAT rate (ibt-103) MUST be greater than zero.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "every $rate in xs:decimal(cbc:Percent) satisfies (((exists(//cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = 'S'][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]) or exists(//cac:AllowanceCharge[cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate])) and (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='S'][cac:Item/ cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)),0.02))) or ((exists(//cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = 'S'][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]) or exists(//cac:AllowanceCharge[cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate])) and (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='S'][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='S'][cac:TaxCategory/xs:decimal(cbc:Percent) = $rate]/xs:decimal(cbc:Amount)),0.02))))",
    "message": "[aligned-ibrp-s-08]-For each different value of VAT category rate (ibt-119) where the VAT category code (ibt-118) is \"Standard rated\", the VAT category taxable amount (ibt-116) in a VAT breakdown (ibg-23) MUST equal the sum of Invoice line net amounts (ibt-131) plus the sum of document level charge amounts (ibt-99) minus the sum of document level allowance amounts (ibt-92) where the VAT category code (ibt-151, ibt-102, ibt-95) is \"Standard rated\" and the VAT rate (ibt-152, ibt-103, ibt-96) equals the VAT category rate (ibt-119).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "u:slack(abs(xs:decimal(../cbc:TaxAmount)) , round((abs(xs:decimal(../cbc:TaxableAmount)) * (xs:decimal(cbc:Percent) div 100)) * 10 * 10) div 100 ,0.02 )",
    "message": "[aligned-ibrp-s-09]-The VAT category tax amount (ibt-117) in a VAT breakdown (ibg-23) where VAT category code (ibt-118) is \"Standard rated\" MUST equal the VAT category taxable amount (ibt-116) multiplied by the VAT category rate (ibt-119).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-s-10",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'S'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:TaxExemptionReason) and not(cbc:TaxExemptionReasonCode)",
    "message": "[aligned-ibrp-s-10]-A VAT breakdown (ibg-23) with VAT Category code (ibt-118) \"Standard rate\" MUST not have a VAT exemption reason code (ibt-121) or VAT exemption reason text (ibt-120).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-102-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'N'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "every $rate in xs:decimal(cbc:Percent) satisfies ((exists(//cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = \"N\"][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]) and  (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)=\"N\"][cac:Item/ cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)),0.02))) or (exists(//cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID) = \"N\"][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate])  and (u:slack(../xs:decimal(cbc:TaxableAmount), sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)=\"N\"][cac:Item/cac:ClassifiedTaxCategory/xs:decimal(cbc:Percent) =$rate]/xs:decimal(cbc:LineExtensionAmount)) ,0.02))))",
    "message": "[ibr-102-ae]-In a VAT Breakdown (IBG-23) where the VAT category code (IBT-118) is 'Standard rate additional VAT', for each different value of VAT category rate (IBT-119) the VAT category taxable amount (IBT-116) shall equal the sum of Invoice line net amounts (IBT-131) where the VAT category code (IBT-151) is 'Standard rate additional VAT' and the VAT rate (IBT-152) equals the VAT category rate (IBT-119).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119",
      "IBT-116",
      "IBT-131",
      "IBT-151",
      "IBT-152"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-108-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'N'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../cbc:TaxAmount = 0",
    "message": "[ibr-108-ae]-In a VAT breakdown (IBG-23), where VAT category code (IBT-118) is 'Standard rate additional VAT', VAT category tax amount (IBT-117) MUST be equal to 0 (zero).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-117"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='E']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-e-08]-In a VAT breakdown (ibg-23) where the VAT category code (ibt-118) is \"Exempt from VAT\" the VAT category taxable amount (ibt-116) MUST equal the sum of Invoice line net amounts (ibt-131) minus the sum of Document level allowance amounts (ibt-92) plus the sum of Document level charge amounts (ibt-99) where the VAT category codes (ibt-151, ibt-95, ibt-102) are \"Exempt from VAT\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-e-09]-The VAT category tax amount (ibt-117) In a VAT breakdown (ibg-23) where the VAT category code (ibt-118) equals \"Exempt from VAT\" MUST equal 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-121-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cac:TaxCategory)",
    "message": "[ibr-121-ae]-In a VAT breakdown (IBG-23) where VAT category code (IBT-118) is 'Exempt from VAT', VAT category VAT Rate (IBT-119) shall not be provided.",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-e-05]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Exempt from VAT\", the Invoiced item VAT rate (ibt-152) MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-163-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(../../cac:ItemPriceExtension/cac:TaxAmount/cbc:TaxAmount)",
    "message": "[ibr-163-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Exempt', VAT Line amount [BTAE-08] shall not be there.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-e-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Exempt from VAT\", the Document level allowance VAT rate (ibt-96) MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-e-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='E'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-e-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Exempt from VAT\", the Document level charge VAT rate (ibt-103) MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-z-05]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Zero rated\" the Invoiced item VAT rate (ibt-152) MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-165-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../../cac:ItemPriceExtension/cac:TaxTotal/cbc:TaxAmount = 0",
    "message": "[ibr-165-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Zero Rated', VAT Line amount [BTAE-08] MUST be zero.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-z-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Zero rated\" the Document level allowance VAT rate (ibt-96) MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-z-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Zero rated\" the Document level charge VAT rate (ibt-103) MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='Z']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-z-08]-In a VAT breakdown (ibg-23) where VAT category code (ibt-118) is \"Zero rated\" the VAT category taxable amount (ibt-116) MUST equal the sum of Invoice line net amount (ibt-131) minus the sum of Document level allowance amounts (ibt-92) plus the sum of Document level charge amounts (ibt-99) where the VAT category codes (ibt-151, ibt-95, ibt-102) are \"Zero rated\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-z-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-z-09]-The VAT category tax amount (ibt-117) in a VAT breakdown (ibg-23) where VAT category code (ibt-118) is \"Zero rated\" MUST equal 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-120-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'Z'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../cbc:TaxAmount = 0",
    "message": "[ibr-120-ae]-In a VAT breakdown (IBG-23) where VAT category code (IBT-118) is 'Zero Rated', VAT category VAT Rate (IBT-119) shall equal to 0.",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-05",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:Percent)",
    "message": "[aligned-ibrp-o-05]-An Invoice line (ibg-25) where the VAT category code (ibt-151) is \"Not subject to VAT\" MUST not contain an Invoiced item VAT rate (ibt-152).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-164-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(../../cac:ItemPriceExtension/cac:TaxAmount/cbc:TaxAmount)",
    "message": "[ibr-164-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Not Subject to VAT', VAT Line amount [BTAE-08] shall not be there.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:Percent)",
    "message": "[aligned-ibrp-o-06]-A Document level allowance (ibg-20) where VAT category code (ibt-95) is \"Not subject to VAT\" MUST not contain a Document level allowance VAT rate (ibt-96).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(cbc:Percent)",
    "message": "[aligned-ibrp-o-07]-A Document level charge (ibg-21) where the VAT category code (ibt-102) is \"Not subject to VAT\" MUST not contain a Document level charge VAT rate (ibt-103).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-08",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='O']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-o-08]-In a VAT breakdown (ibg-23) where the VAT category code (ibt-118) is \" Not subject to VAT\" the VAT category taxable amount (ibt-116) MUST equal the sum of Invoice line net amounts (ibt-131) minus the sum of Document level allowance amounts (ibt-92) plus the sum of Document level charge amounts (ibt-99) where the VAT category codes (ibt-151, ibt-95, ibt-102) are \"Not subject to VAT\".",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-09",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-o-09]-The VAT category tax amount (ibt-117) in a VAT breakdown (ibg-23) where the VAT category code (ibt-118) is \"Not subject to VAT\" MUST be 0 (zero).",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-o-11-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'O'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(exists(cac:TaxCategory[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']/cbc:Percent))",
    "message": "[aligned-ibrp-o-11-ae]-In a VAT breakdown (IBG-23) where VAT category code (IBT-118) is 'Not Subject to VAT', VAT category tax Rate (IBT-119) shall not be provided.",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-05-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent))",
    "message": "[aligned-ibrp-ae-05-ae]-In an Invoice line (ibg-25) where the Invoiced item VAT category code (ibt-151) is \"Reverse charge\" the Invoiced item VAT rate (ibt-152) MUST be there.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-103-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "exists(../../../cac:AccountingCustomerParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID)",
    "message": "[ibr-103-ae]-When the Invoiced item VAT category code (ibt-151) is VAT reverse charge, then Buyer VAT identifier (ibt-048) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-162-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "../../cac:ItemPriceExtension/cac:TaxTotal/cbc:TaxAmount = 0",
    "message": "[ibr-162-ae]-In Line VAT information (IBG-30) where Invoiced item VAT category code (IBT-151) is 'Reverse charge', VAT Line amount [BTAE-08] MUST be 'zero'.",
    "references": [
      "IBG-30",
      "IBT-151",
      "BTAE-08"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-174-ae",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT'] | cac:CreditNoteLine/cac:Item/cac:ClassifiedTaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "not(not(exists(../cac:StandardItemIdentification/cbc:ID)) or ../cac:StandardItemIdentification/cbc:ID/@schemeID != \"0160\")",
    "message": "[ibr-174-ae]-In Item Information (IBG-31) where Invoiced VAT category code (IBT-151) is 'Reverse charge', the corresponding Item Standard Identifier (IBT-157) MUST be there and the Scheme Identifier (IBT-157-1) should have the code 0160.",
    "references": [
      "IBG-31",
      "IBT-151",
      "IBT-157"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-06",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=false()]/cac:TaxCategory[normalize-space(cbc:ID)='AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-ae-06]-In a Document level allowance (ibg-20) where the Document level allowance VAT category code (ibt-95) is \"Reverse charge\" the Document level allowance VAT rate (ibt-96) MUST be greater than zero.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-07",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator=true()]/cac:TaxCategory[normalize-space(cbc:ID)='AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(xs:decimal(cbc:Percent) = 0)",
    "message": "[aligned-ibrp-ae-07]-In a Document level charge (ibg-21) where the Document level charge VAT category code (ibt-102) is \"Reverse charge\" the Document level charge VAT rate (ibt-103) MUST be greater than zero.",
    "references": [],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-08-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "(exists(//cac:InvoiceLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:InvoiceLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount))))) or (exists(//cac:CreditNoteLine) and (xs:decimal(../cbc:TaxableAmount) = (sum(../../../cac:CreditNoteLine[cac:Item/cac:ClassifiedTaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:LineExtensionAmount)) + sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=true()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount)) - sum(../../../cac:AllowanceCharge[cbc:ChargeIndicator=false()][cac:TaxCategory/normalize-space(cbc:ID)='AE']/xs:decimal(cbc:Amount)))))",
    "message": "[aligned-ibrp-ae-08-ae]-In a VAT Breakdown (IBG-23) where the VAT category code (IBT-118) is 'Reverse Charge', for each different value of VAT category rate (IBT-119) the VAT category taxable amount (IBT-116) shall equal the sum of Invoice line net amounts (IBT-131) plus the sum of Document level charge amounts (IBT-99) minus the sum of Document level allowance amounts (IBT-92) where the VAT category code (IBT-151, IBT-102, IBT-095) is 'Reverse Charge' and the VAT rate (IBT-152, IBT-103, IBT-096) equals the VAT category rate (IBT-119).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-119",
      "IBT-116",
      "IBT-131",
      "IBT-99",
      "IBT-92",
      "IBT-151",
      "IBT-102",
      "IBT-095",
      "IBT-152",
      "IBT-103",
      "IBT-096"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "aligned-ibrp-ae-09-ae",
    "flag": "fatal",
    "context": "/*/cac:TaxTotal/cac:TaxSubtotal/cac:TaxCategory[normalize-space(cbc:ID) = 'AE'][cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']",
    "test": "xs:decimal(../cbc:TaxAmount) = 0",
    "message": "[aligned-ibrp-ae-09-ae]-In a VAT breakdown (IBG-23) where the VAT category code (IBT-118) is 'Reverse charge', VAT category tax amount (IBT-117) MUST be equal to 0 (zero).",
    "references": [
      "IBG-23",
      "IBT-118",
      "IBT-117"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-132-ae",
    "flag": "fatal",
    "context": "cac:Party[cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'AE']/cac:PartyTaxScheme/cbc:CompanyID",
    "test": "matches(., \"^1[a-zA-Z0-9]{12}03$\")",
    "message": "[ibr-132-ae]-VAT identifier [IBT-031, IBT-048, IBT-063, BTAE-14] should be TRN [VAT registration number] and must be 15 alphanumeric digits, starting with 1, ending with 03 .",
    "references": [
      "IBT-031",
      "IBT-048",
      "IBT-063",
      "BTAE-14"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-148-ae",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID",
    "test": "matches(., \"^1[0-9]{9}$\")",
    "message": "[ibr-148-ae]-The Seller VAT registration identifier (IBT-032) should be TIN (tax identification number) and must be 10 numeric digits and should be of the format 1XXXXXXXXXX.",
    "references": [
      "IBT-032"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-133-ae",
    "flag": "fatal",
    "context": "cac:TaxScheme/cbc:ID",
    "test": ". = \"VAT\" or not(exists(/cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID))",
    "message": "[ibr-133-ae]-VAT scheme code, if provided in (IBT-095-01) or (IBT-031-1) or (IBT-048-1) or (IBT-063-1) or (IBT-102-1) or (IBT-118-1) shall be 'VAT' except when Seller tax registration identifier (IBT-032) is provided.",
    "references": [
      "IBT-095",
      "IBT-031",
      "IBT-048",
      "IBT-063",
      "IBT-102",
      "IBT-118",
      "IBT-032"
    ],
    "documentType": "invoice",
    "packType": "jurisdiction-aligned",
    "sourceFile": "trn-invoice/schematron/PINT-jurisdiction-aligned-rules.sch"
  },
  {
    "id": "ibr-068",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0088'] | cac:PartyIdentification/cbc:ID[@schemeID = '0088'] | cbc:CompanyID[@schemeID = '0088']",
    "test": "matches(normalize-space(), '^[0-9]+$') and u:gln(normalize-space())",
    "message": "[ibr-068]-GLN MUST have a valid format according to GS1 rules for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-127",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0007'] | cac:PartyIdentification/cbc:ID[@schemeID = '0007'] | cbc:CompanyID[@schemeID = '0007']",
    "test": "string-length(normalize-space()) = 10 and string(number(normalize-space())) != 'NaN'",
    "message": "[ibr-127]-Swedish organization number MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-069",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0192'] | cac:PartyIdentification/cbc:ID[@schemeID = '0192'] | cbc:CompanyID[@schemeID = '0192']",
    "test": "matches(normalize-space(), '^[0-9]{9}$') and u:mod11(normalize-space())",
    "message": "[ibr-069]-Norwegian organization number MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-070",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0184'] | cac:PartyIdentification/cbc:ID[@schemeID = '0184'] | cbc:CompanyID[@schemeID = '0184']",
    "test": "(string-length(text()) = 10) and (substring(text(), 1, 2) = 'DK') and (string-length(translate(substring(text(), 3, 8), '1234567890', '')) = 0)",
    "message": "[ibr-070]-Danish organization number (CVR) MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-113",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0208'] | cac:PartyIdentification/cbc:ID[@schemeID = '0208'] | cbc:CompanyID[@schemeID = '0208']",
    "test": "matches(normalize-space(), '^[0-9]{10}$') and u:mod97-0208(normalize-space())",
    "message": "[ibr-113]-Belgian enterprise number MUST be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-114",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0201'] | cac:PartyIdentification/cbc:ID[@schemeID = '0201'] | cbc:CompanyID[@schemeID = '0201']",
    "test": "u:checkCodiceIPA(normalize-space())",
    "message": "[ibr-114]-IPA Code (Codice Univoco Unit Organizzativa) must be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-115",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0210'] | cac:PartyIdentification/cbc:ID[@schemeID = '0210'] | cbc:CompanyID[@schemeID = '0210'] | cbc:EndpointID[@schemeID = '9907'] | cac:PartyIdentification/cbc:ID[@schemeID = '9907'] | cbc:CompanyID[@schemeID = '9907']",
    "test": "u:checkCF(normalize-space())",
    "message": "[ibr-115]-Tax Code (Codice Fiscale) must be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-116",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0211'] | cac:PartyIdentification/cbc:ID[@schemeID = '0211'] | cbc:CompanyID[@schemeID = '0211'] | cbc:EndpointID[@schemeID = '9906'] | cac:PartyIdentification/cbc:ID[@schemeID = '9906'] | cbc:CompanyID[@schemeID = '9906']",
    "test": "u:checkPIVAseIT(normalize-space())",
    "message": "[ibr-116]-Italian VAT Code (Partita Iva) must be stated in the correct format for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-120",
    "flag": "fatal",
    "context": "cbc:EndpointID[@schemeID = '0151'] | cac:PartyIdentification/cbc:ID[@schemeID = '0151'] | cbc:CompanyID[@schemeID = '0151']",
    "test": "matches(normalize-space(), '^[0-9]{11}$') and u:abn(normalize-space())",
    "message": "[ibr-120]-Australian Business Number (ABN) must be stated in the correct format for for endpoints (ibt-034), (ibt-049), party identification (ibt-029), (ibt-046), (ibt-060), legal entities (ibt-030), (ibt-047), (ibt-061).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-083",
    "flag": "fatal",
    "context": "cac:Price/cac:AllowanceCharge",
    "test": "normalize-space(cbc:ChargeIndicator/text()) = 'false'",
    "message": "[ibr-083]-Charge on price level (ibt-147) is NOT allowed. Only value 'false' allowed.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-30",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "(count(cbc:AllowanceChargeReason) <= 1)",
    "message": "[ibr-sr-30]-Allowance reason (ibt-097) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-031",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "((exists(cbc:Amount) and  not(ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-031]-Allowance (ibg-20) MUST have an allowance amount (ibt-092).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-033",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "((exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode)) and not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-033]-Each Document level allowance (ibg-20) MUST have a Document level allowance reason (ibt-097) or a Document level allowance reason code (ibt-098).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-041",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "exists(cbc:Amount) or not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))",
    "message": "[ibr-041]-Each Invoice line allowance (ibg-27) MUST have an Invoice line allowance amount (ibt-136).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-042",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = false()]",
    "test": "exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode) or not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))",
    "message": "[ibr-042]-Each Invoice line allowance (ibg-27) MUST have an Invoice line allowance reason (ibt-139) or an Invoice line allowance reason code (ibt-140).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-036",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "((exists(cbc:Amount) and  not(ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-036]-Charge (ibg-21) MUST have a charge amount (ibt-099).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-31",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "(count(cbc:AllowanceChargeReason) <= 1)",
    "message": "[ibr-sr-31]-Charge reason (ibt-104) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-038",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "((exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode)) and not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))) or (ancestor::cac:InvoiceLine | ancestor::cac:CreditNoteLine)",
    "message": "[ibr-038]-Each Document level charge (ibg-21) MUST have a Document level charge reason (ibt-104) or a Document level charge reason code (ibt-105).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-043",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "exists(cbc:Amount) or not(exists(ancestor::cac:InvoiceLine|ancestor::cac:CreditNoteLine))",
    "message": "[ibr-043]-Each Invoice line charge (ibg-28) MUST have an Invoice line charge amount (ibt-141).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-044",
    "flag": "fatal",
    "context": "cac:AllowanceCharge[cbc:ChargeIndicator = true()]",
    "test": "exists(cbc:AllowanceChargeReason) or exists(cbc:AllowanceChargeReasonCode)",
    "message": "[ibr-044]-Each Invoice line charge (ibg-28) MUST have an Invoice line charge reason (ibt-144) or an invoice line charge reason code (ibt-145).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-082",
    "flag": "fatal",
    "context": "cac:AllowanceCharge",
    "test": "normalize-space(cbc:ChargeIndicator/text()) = 'true' or normalize-space(cbc:ChargeIndicator/text()) = 'false'",
    "message": "[ibr-082]-Allowance/charge indicator value MUST equal 'true' or 'false'.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-61",
    "flag": "fatal",
    "context": "cac:AllowanceCharge/cac:TaxCategory",
    "test": "(count(cbc:TaxExemptionReason) <= 1)",
    "message": "[ibr-sr-61]-Allowance/charge tax exemption reason (ibt-197) (ibt-199) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-052",
    "flag": "fatal",
    "context": "cac:AdditionalDocumentReference",
    "test": "(normalize-space(cbc:ID)) != ''",
    "message": "[ibr-052]-Each Additional supporting document (ibg-24) MUST contain a Supporting document reference (ibt-122).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-33",
    "flag": "fatal",
    "context": "cac:AdditionalDocumentReference",
    "test": "(count(cbc:DocumentDescription) <= 1)",
    "message": "[ibr-sr-33]-Supporting document description (ibt-123) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-080",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party",
    "test": "cbc:EndpointID",
    "message": "[ibr-080]-The Buyer electronic address (ibt-049) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-063",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cbc:EndpointID",
    "test": "exists(@schemeID)",
    "message": "[ibr-063]-The Buyer electronic address (ibt-049) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-011",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cac:PostalAddress",
    "test": "normalize-space(cac:Country/cbc:IdentificationCode) != ''",
    "message": "[ibr-011]-The Buyer postal address (ibg-08) MUST contain a Buyer country code (ibt-055).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-54",
    "flag": "fatal",
    "context": "cac:AccountingCustomerParty/cac:Party/cac:PostalAddress",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-54]-The Buyer Postal Address Line (ibt-163) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-057",
    "flag": "fatal",
    "context": "cac:Delivery/cac:DeliveryLocation/cac:Address",
    "test": "exists(cac:Country/cbc:IdentificationCode)",
    "message": "[ibr-057]-Each Deliver to address (ibg-15) MUST contain a Deliver to country code (ibt-080).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-56",
    "flag": "fatal",
    "context": "cac:Delivery/cac:DeliveryLocation/cac:Address",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-56]-The Delivery Postal Address Line (ibt-165) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-012",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:LineExtensionAmount)",
    "message": "[ibr-012]-An Invoice MUST have the Sum of Invoice line net amount (ibt-106).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-013",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:TaxExclusiveAmount)",
    "message": "[ibr-013]-An Invoice MUST have the Invoice total amount without Tax (ibt-109).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-014",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:TaxInclusiveAmount)",
    "message": "[ibr-014]-An Invoice MUST have the Invoice total amount with Tax (ibt-112).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-015",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "exists(cbc:PayableAmount)",
    "message": "[ibr-015]-An Invoice MUST have the Amount due for payment (ibt-115).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-091",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:PayableAmount, '.')) <= 2",
    "message": "[ibr-091]-Invoice amount due for payment (ibt-115) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-121",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:AllowanceTotalAmount, '.')) <= 2",
    "message": "[ibr-121]-Document level allowance amount (ibt-107) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-122",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:ChargeTotalAmount, '.')) <= 2",
    "message": "[ibr-122]-Document level charge amount (ibt-108) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-123",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:TaxExclusiveAmount, '.')) <= 2",
    "message": "[ibr-123]-Invoice total amount without TAX (ibt-109) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-125",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "string-length(substring-after(cbc:TaxInclusiveAmount, '.')) <= 2",
    "message": "[ibr-125]- Invoice total amount with TAX (ibt-112) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-10",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "(xs:decimal(cbc:LineExtensionAmount) = (round(sum(//(cac:InvoiceLine|cac:CreditNoteLine)/xs:decimal(cbc:LineExtensionAmount)) * 10 * 10) div 100))",
    "message": "[ibr-co-10]-Sum of Invoice line net amount (ibt-106) =  Invoice line net amount (ibt-131).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-11",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "xs:decimal(cbc:AllowanceTotalAmount) = (round(sum(../cac:AllowanceCharge[cbc:ChargeIndicator=false()]/xs:decimal(cbc:Amount)) * 10 * 10) div 100) or  (not(cbc:AllowanceTotalAmount) and not(../cac:AllowanceCharge[cbc:ChargeIndicator=false()]))",
    "message": "[ibr-co-11]-Sum of allowances on document level (ibt-107) =  Document level allowance amount (ibt-092).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-12",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "xs:decimal(cbc:ChargeTotalAmount) = (round(sum(../cac:AllowanceCharge[cbc:ChargeIndicator=true()]/xs:decimal(cbc:Amount)) * 10 * 10) div 100) or (not(cbc:ChargeTotalAmount) and not(../cac:AllowanceCharge[cbc:ChargeIndicator=true()]))",
    "message": "[ibr-co-12]-Sum of charges on document level (ibt-108) =  Document level charge amount (ibt-099).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-13",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "../cac:TaxTotal/cbc:TaxIncludedIndicator = true() or (((cbc:ChargeTotalAmount) and (cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = round((xs:decimal(cbc:LineExtensionAmount) + xs:decimal(cbc:ChargeTotalAmount) - xs:decimal(cbc:AllowanceTotalAmount)) * 10 * 10) div 100 ))  or (not(cbc:ChargeTotalAmount) and (cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = round((xs:decimal(cbc:LineExtensionAmount) - xs:decimal(cbc:AllowanceTotalAmount)) * 10 * 10 ) div 100)) or ((cbc:ChargeTotalAmount) and not(cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = round((xs:decimal(cbc:LineExtensionAmount) + xs:decimal(cbc:ChargeTotalAmount)) * 10 * 10 ) div 100)) or (not(cbc:ChargeTotalAmount) and not(cbc:AllowanceTotalAmount) and (xs:decimal(cbc:TaxExclusiveAmount) = xs:decimal(cbc:LineExtensionAmount))))",
    "message": "[ibr-co-13]-Invoice total amount without Tax (ibt-109) =  Invoice line net amount (ibt-131) - Sum of allowances on document level (ibt-107) + Sum of charges on document level (ibt-108).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-16",
    "flag": "fatal",
    "context": "cac:LegalMonetaryTotal",
    "test": "(xs:decimal(cbc:PrepaidAmount) and not(xs:decimal(cbc:PayableRoundingAmount)) and (xs:decimal(cbc:PayableAmount) = (round((xs:decimal(cbc:TaxInclusiveAmount) - xs:decimal(cbc:PrepaidAmount)) * 10 * 10) div 100))) or (not(xs:decimal(cbc:PrepaidAmount)) and not(xs:decimal(cbc:PayableRoundingAmount)) and xs:decimal(cbc:PayableAmount) = xs:decimal(cbc:TaxInclusiveAmount)) or (xs:decimal(cbc:PrepaidAmount) and xs:decimal(cbc:PayableRoundingAmount) and ((round((xs:decimal(cbc:PayableAmount) - xs:decimal(cbc:PayableRoundingAmount)) * 10 * 10) div 100) = (round((xs:decimal(cbc:TaxInclusiveAmount) - xs:decimal(cbc:PrepaidAmount)) * 10 * 10) div 100))) or (not(xs:decimal(cbc:PrepaidAmount)) and xs:decimal(cbc:PayableRoundingAmount) and ((round((xs:decimal(cbc:PayableAmount) - xs:decimal(cbc:PayableRoundingAmount)) * 10 * 10) div 100) = xs:decimal(cbc:TaxInclusiveAmount)))",
    "message": "[ibr-co-16]-Amount due for payment (ibt-115) = Invoice total amount with Tax (ibt-112) - Paid amount (ibt-113) + Rounding amount (ibt-114).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-001",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:CustomizationID) != ''",
    "message": "[ibr-001]-An Invoice MUST have a Specification identifier (ibt-024).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-002",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:ID) !=''",
    "message": "[ibr-002]-An Invoice MUST have an Invoice number (ibt-001).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-003",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:IssueDate) !=''",
    "message": "[ibr-003]-An Invoice MUST have an Invoice issue date (ibt-002).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-004",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:InvoiceTypeCode) !='' or normalize-space(cbc:CreditNoteTypeCode) !=''",
    "message": "[ibr-004]-An Invoice MUST have an Invoice type code (ibt-003).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-005",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cbc:DocumentCurrencyCode) !=''",
    "message": "[ibr-005]-An Invoice MUST have an Invoice currency code (ibt-005).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-006",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) !=''",
    "message": "[ibr-006]-An Invoice MUST contain the Seller name (ibt-027).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-007",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "normalize-space(cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) !=''",
    "message": "[ibr-007]-An Invoice MUST contain the Buyer name (ibt-044).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-008",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:AccountingSupplierParty/cac:Party/cac:PostalAddress)",
    "message": "[ibr-008]-An Invoice MUST contain the Seller postal address (ibg-05).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-010",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:AccountingCustomerParty/cac:Party/cac:PostalAddress)",
    "message": "[ibr-010]-An Invoice MUST contain the Buyer postal address (ibg-08).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-016",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cac:InvoiceLine) or exists(cac:CreditNoteLine)",
    "message": "[ibr-016]-An Invoice MUST have at least one Invoice line (ibg-25)",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-053",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "every $taxcurrency in cbc:TaxCurrencyCode satisfies exists(//cac:TaxTotal/cbc:TaxAmount[@currencyID=$taxcurrency])",
    "message": "[ibr-053]-If the Tax accounting currency code (ibt-006) is present, then the Invoice total Tax amount in accounting currency (ibt-111) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-066",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "count(cac:PaymentMeans/cac:CardAccount) <= 1",
    "message": "[ibr-066]-An Invoice MUST contain maximum one Payment Card account (ibg-18).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-067",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "count(cac:PaymentMeans/cac:PaymentMandate) <= 1",
    "message": "[ibr-067]-An Invoice MUST contain maximum one Payment Mandate (ibg-19).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-071",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(//cac:AdditionalDocumentReference[cbc:DocumentTypeCode = '130']/cac:Attachment)",
    "message": "[ibr-071]-An invoice should not include an AdditonalDocumentReference (ibg-24) simultaneously referring an Invoice Object Identifier (ibt-018) and an Attachment (ibt-125).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-072",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(//cac:AdditionalDocumentReference[cbc:DocumentTypeCode = '130']/cbc:DocumentDescription)",
    "message": "[ibr-072]-An invoice MUST not include an AdditionalDocumentReference (ibg-24) simultaneously referring an Invoice Object Identifier (ibt-018) and an Document Description (ibt-123).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-076",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "exists(cbc:ProfileID)",
    "message": "[ibr-076]-Business process (ibt-023) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-078",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AdditionalDocumentReference[cbc:DocumentTypeCode='130']) <= 1)",
    "message": "[ibr-078]-Only one invoiced object (ibt-018) is allowed on document level.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-084",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cbc:TaxCurrencyCode) or (cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:TaxCurrencyCode)] <= 0 and cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:DocumentCurrencyCode)] <= 0) or (cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:TaxCurrencyCode)] >= 0 and cac:TaxTotal/cbc:TaxAmount[@currencyID=normalize-space(../../cbc:DocumentCurrencyCode)] >= 0)",
    "message": "[ibr-084]-Invoice total tax amount (ibt-110) and Invoice total tax amount in accounting currency (ibt-111) MUST have the same operational sign.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-087",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "not(cac:Price/cbc:BaseQuantity) or xs:decimal(cac:Price/cbc:BaseQuantity) > 0",
    "message": "[ibr-087]-Base quantity (ibt-149) MUST be a positive number above zero.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-090",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ProjectReference) <= 1) and (count(cac:AdditionalDocumentReference[cbc:DocumentTypeCode='50']) <= 1)",
    "message": "[ibr-090]-Only one project reference (ibt-011) is allowed on document level.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-094",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ContractDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-094]-Contract reference (ibt-012) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-095",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ReceiptDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-095]-Receiving advice reference (ibt-015) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-096",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:DespatchDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-096]-Despatch advice reference (ibt-016) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-097",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:InvoicePeriod) <= 1)",
    "message": "[ibr-097]-Invoicing period (ibg-14) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-098",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) <= 1)",
    "message": "[ibr-098]-Seller name (ibt-027) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-099",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-099]-Seller trader name (ibt-028) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-100",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) <= 1)",
    "message": "[ibr-100]-Seller legal registration identifier (ibt-030) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-101",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyLegalForm) <= 1)",
    "message": "[ibr-101]-Seller additional legal information (ibt-033) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-102",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName) <= 1)",
    "message": "[ibr-102]-Buyer name (ibt-044) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-103",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyLegalEntity/cbc:CompanyID) <= 1)",
    "message": "[ibr-103]-Buyer legal registration identifier (ibt-047) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-104",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyTaxScheme/cbc:CompanyID) <= 1)",
    "message": "[ibr-104]-Buyer tax identifier (ibt-048) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-107",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:Delivery) <= 1)",
    "message": "[ibr-107]-Deliver to information (ibg-13) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-112",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-112]-Buyer trader name (ibt-045) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-15",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "cac:TaxTotal/cbc:TaxIncludedIndicator = true() or ((cac:LegalMonetaryTotal/xs:decimal(cbc:TaxInclusiveAmount) = round( (cac:LegalMonetaryTotal/xs:decimal(cbc:TaxExclusiveAmount) + cac:TaxTotal/xs:decimal(cbc:TaxAmount[@currencyID=/*/cbc:DocumentCurrencyCode])) * 10 * 10) div 100))",
    "message": "[ibr-co-15]-Invoice total amount with Tax (ibt-112) = Invoice total amount without Tax (ibt-109) + Invoice total Tax amount (ibt-110).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-16",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:AccountingCustomerParty/cac:Party/cac:PartyIdentification/cbc:ID) <= 1)",
    "message": "[ibr-sr-16]-Buyer identifier (ibt-046) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-39",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:ProjectReference/cbc:ID) <= 1)",
    "message": "[ibr-sr-39]-Project reference (ibt-011) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-49",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:InvoicePeriod/cbc:DescriptionCode) <=1)",
    "message": "[ibr-sr-49]-Value tax point date (ibt-007) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-51",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cbc:Note) <= 1)",
    "message": "[ibr-sr-51]-Note (ibt-022) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-52",
    "flag": "fatal",
    "context": "/ubl:Invoice | /cn:CreditNote",
    "test": "(count(cac:OriginatorDocumentReference/cbc:ID) <= 1)",
    "message": "[ibr-sr-52]-Tender or lot reference (ibt-017) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-021",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "normalize-space(cbc:ID) != ''",
    "message": "[ibr-021]-Each Invoice line (ibg-25) MUST have an Invoice line identifier (ibt-126).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-022",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cbc:InvoicedQuantity) or exists(cbc:CreditedQuantity)",
    "message": "[ibr-022]-Each Invoice line (ibg-25) MUST have an invoiced quantity (ibt-129)..",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-023",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cbc:InvoicedQuantity/@unitCode) or exists(cbc:CreditedQuantity/@unitCode)",
    "message": "[ibr-023]-An Invoice line (ibg-25) MUST have an Invoiced quantity unit of measure code (ibt-130).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-024",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cbc:LineExtensionAmount)",
    "message": "[ibr-024]-Each Invoice line (ibg-25) MUST have an Invoice line net amount (ibt-131).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-025",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "normalize-space(cac:Item/cbc:Name) != ''",
    "message": "[ibr-025]-Each Invoice line (ibg-25) MUST contain the Item name (ibt-153).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-026",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "exists(cac:Price/cbc:PriceAmount)",
    "message": "[ibr-026]-Each Invoice line (ibg-25) MUST contain the Item net price (ibt-146).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-027",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Price/cbc:PriceAmount) >= 0",
    "message": "[ibr-027]-The Item net price (ibt-146) MUST NOT be negative.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-028",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(cac:Price/cac:AllowanceCharge/cbc:BaseAmount) >= 0 or not(exists(cac:Price/cac:AllowanceCharge/cbc:BaseAmount))",
    "message": "[ibr-028]-The Item gross price (ibt-148) MUST NOT be negative.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-089",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:DocumentReference[cbc:DocumentTypeCode = 130]) <= 1)",
    "message": "[ibr-089]-Only one invoiced object (ibt-128) is allowed per line (ibg-25).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-109",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:OrderLineReference/cbc:LineID) <= 1)",
    "message": "[ibr-109]-Referenced purchase order line identifier (ibt-132) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-110",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:InvoicePeriod) <= 1)",
    "message": "[ibr-110]-Invoice line period (ibg-26) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-111",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:Price/cac:AllowanceCharge/cbc:Amount) <= 1)",
    "message": "[ibr-111]-Item price discount (ibt-147) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-34",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cbc:Note) <= 1)",
    "message": "[ibr-sr-34]-Invoice line note (ibt-127) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-38",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:Item/cac:ClassifiedTaxCategory/cbc:TaxExemptionReason) <= 1)",
    "message": "[ibr-sr-38]-Invoiced item tax exemption reason text (ibt-185) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-50",
    "flag": "fatal",
    "context": "cac:InvoiceLine | cac:CreditNoteLine",
    "test": "(count(cac:Item/cbc:Description) <= 1)",
    "message": "[ibr-sr-50]-Item description (ibt-154) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-085",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "(cbc:StartDate >= xs:date(../../cac:InvoicePeriod/cbc:StartDate)) or not(cbc:StartDate) or not(../../cac:InvoicePeriod/cbc:StartDate)",
    "message": "[ibr-085]-Start date of line period (ibt-134) MUST be within invoice period (ibg-14).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-086",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "(cbc:EndDate <= xs:date(../../cac:InvoicePeriod/cbc:EndDate)) or not(cbc:EndDate) or not(../../cac:InvoicePeriod/cbc:EndDate)",
    "message": "[ibr-086]-End date of line period (ibt-135) MUST be within invoice period (ibg-14).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-030",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "(exists(cbc:EndDate) and exists(cbc:StartDate) and xs:date(cbc:EndDate) >= xs:date(cbc:StartDate)) or not(exists(cbc:StartDate)) or not(exists(cbc:EndDate))",
    "message": "[ibr-030]-If both Invoice line period start date (ibt-134) and Invoice line period end date (ibt-135) are given then the Invoice line period end date (ibt-135) MUST be later or equal to the Invoice line period start date (ibt-134).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-20",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:InvoicePeriod | cac:CreditNoteLine/cac:InvoicePeriod",
    "test": "exists(cbc:StartDate) or exists(cbc:EndDate)",
    "message": "[ibr-co-20]-If Invoice line period (ibg-26) is used, the Invoice line period start date (ibt-134) or the Invoice line period end date (ibt-135) MUST be filled, or both.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-029",
    "flag": "fatal",
    "context": "cac:InvoicePeriod",
    "test": "(exists(cbc:EndDate) and exists(cbc:StartDate) and xs:date(cbc:EndDate) >= xs:date(cbc:StartDate)) or not(exists(cbc:StartDate)) or not(exists(cbc:EndDate))",
    "message": "[ibr-029]-If both Invoicing period start date (ibt-073) and Invoicing period end date (ibt-074) are given then the Invoicing period end date (ibt-074) MUST be later or equal to the Invoicing period start date (ibt-073).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-19",
    "flag": "fatal",
    "context": "cac:InvoicePeriod",
    "test": "exists(cbc:StartDate) or exists(cbc:EndDate) or (exists(cbc:DescriptionCode) and not(exists(cbc:StartDate)) and not(exists(cbc:EndDate)))",
    "message": "[ibr-co-19]-If Invoicing period (ibg-14) is used, the Invoicing period start date (ibt-073) or the Invoicing period end date (ibt-074) MUST be filled, or both.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-054",
    "flag": "fatal",
    "context": "//cac:AdditionalItemProperty",
    "test": "exists(cbc:Name) and exists(cbc:Value)",
    "message": "[ibr-054]-Each Item attribute (ibg-32) MUST contain an Item attribute name (ibt-160) and an Item attribute value (ibt-161).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-065",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode | cac:CreditNoteLine/cac:Item/cac:CommodityClassification/cbc:ItemClassificationCode",
    "test": "exists(@listID)",
    "message": "[ibr-065]-The Item classification identifier (ibt-158) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-064",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:StandardItemIdentification/cbc:ID | cac:CreditNoteLine/cac:Item/cac:StandardItemIdentification/cbc:ID",
    "test": "exists(@schemeID)",
    "message": "[ibr-064]-The Item standard identifier (ibt-157) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-58",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:Item/cac:ClassifiedTaxCategory",
    "test": "exists(cbc:ID)",
    "message": "[ibr-sr-58]-The Invoiced item TAX category code (ibt-151) MUST be present.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-017",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "exists(cac:PartyName/cbc:Name) and (not(cac:PartyName/cbc:Name = ../cac:AccountingSupplierParty/cac:Party/cac:PartyName/cbc:Name) and not(cac:PartyIdentification/cbc:ID = ../cac:AccountingSupplierParty/cac:Party/cac:PartyIdentification/cbc:ID) )",
    "message": "[ibr-017]-The Payee name (ibt-059) MUST be provided in the Invoice, if the Payee (ibg-10) is different from the Seller (ibg-04).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-105",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "(count(cac:PartyIdentification/cbc:ID[upper-case(@schemeID) != 'SEPA']) <= 1) or ((cac:PartyName/cbc:Name) = (../cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName))",
    "message": "[ibr-105]-The Payee identifier (ibt-060) MUST occur maximum once in the Invoice, if the Payee (ibg-10) is different from the Seller (ibg-04).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-106",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "(count(cac:PartyLegalEntity/cbc:CompanyID) <= 1) or ((cac:PartyName/cbc:Name) = (../cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName))",
    "message": "[ibr-106]-The Payee legal identifier (ibt-061) MUST occur maximum once in the Invoice, if the Payee (ibg-10) is different from the Seller (ibg-04).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-19",
    "flag": "fatal",
    "context": "cac:PayeeParty",
    "test": "(count(cac:PartyName/cbc:Name) <= 1) or ((cac:PartyName/cbc:Name) = (../cac:AccountingSupplierParty/cac:Party/cac:PartyLegalEntity/cbc:RegistrationName))",
    "message": "[ibr-sr-19]-Payee name (ibt-059) MUST occur maximum once, if the Payee is different from the Seller",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-59",
    "flag": "fatal",
    "context": "cac:PaymentMeans/cac:PayeeFinancialAccount/cac:FinancialInstitutionBranch/cac:Address",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-59]-The Payee Postal Address Line (ibt-174) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-049",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "exists(cbc:PaymentMeansCode)",
    "message": "[ibr-049]-A Payment instruction (ibg-16) MUST specify the Payment means type code (ibt-081).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-27",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cbc:PaymentMeansCode) <= 1)",
    "message": "[ibr-sr-27]-Payment means text (ibt-081) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-28",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cac:PaymentMandate/cbc:ID) <= 1)",
    "message": "[ibr-sr-28]-Mandate reference identifier (ibt-089) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-45",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cbc:PaymentDueDate) <=1)",
    "message": "[ibr-sr-45]-Due Date (ibt-009) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-46",
    "flag": "fatal",
    "context": "cac:PaymentMeans",
    "test": "(count(cbc:PaymentMeansCode/@name) <=1)",
    "message": "[ibr-sr-46]-Payment means text (ibt-082) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-05",
    "flag": "fatal",
    "context": "cac:PaymentTerms",
    "test": "(count(cbc:Note) <= 1)",
    "message": "[ibr-sr-05]-Payment terms (ibt-020) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-60",
    "flag": "fatal",
    "context": "cac:PaymentTerms",
    "test": "(count(cbc:PaymentMeansID) <= 1)",
    "message": "[ibr-sr-60]-Payment Instruction ID (ibt-187) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-055",
    "flag": "fatal",
    "context": "cac:BillingReference",
    "test": "exists(cac:InvoiceDocumentReference/cbc:ID)",
    "message": "[ibr-055]-Each Preceding Invoice reference (ibg-03) MUST contain a Preceding Invoice reference (ibt-025).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-07",
    "flag": "fatal",
    "context": "cac:BillingReference",
    "test": "(cac:InvoiceDocumentReference/cbc:ID)",
    "message": "[ibr-sr-07]-If there is a preceding invoice reference (ibg-03) , the preceding invoice number (ibt-025) MUST be present",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-06",
    "flag": "fatal",
    "context": "cac:BillingReference",
    "test": "(count(cac:InvoiceDocumentReference) <= 1)",
    "message": "[ibr-sr-06]-Preceding invoice reference (ibt-025) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-26",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "exists(cac:PartyTaxScheme/cbc:CompanyID) or exists(cac:PartyIdentification/cbc:ID) or exists(cac:PartyLegalEntity/cbc:CompanyID)",
    "message": "[ibr-co-26]-In order for the buyer to automatically identify a supplier, the Seller identifier (ibt-029), the Seller legal registration identifier (ibt-030) and/or the Seller Tax identifier (ibt-031) MUST be present.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-081",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "cbc:EndpointID",
    "message": "[ibr-081]-The Seller electronic address (ibt-049) MUST be provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-42",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party",
    "test": "(count(cac:PartyTaxScheme) <= 2)",
    "message": "[ibr-sr-42]-Party tax scheme MUST occur maximum twice in accounting supplier party",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-062",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cbc:EndpointID",
    "test": "exists(@schemeID)",
    "message": "[ibr-062]-The Seller electronic address (ibt-034) MUST have a Scheme identifier.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-009",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cac:PostalAddress",
    "test": "normalize-space(cac:Country/cbc:IdentificationCode) != ''",
    "message": "[ibr-009]-The Seller postal address (ibg-05) MUST contain a Seller country code (ibt-040).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-53",
    "flag": "fatal",
    "context": "cac:AccountingSupplierParty/cac:Party/cac:PostalAddress",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-53]-The Seller Postal Address Line (ibt-162) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-018",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "normalize-space(cac:PartyName/cbc:Name) != ''",
    "message": "[ibr-018]-The Seller tax representative name (ibt-062) MUST be provided in the Invoice, if the Seller (ibg-04) has a Seller tax representative party (ibg-11)",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-019",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "exists(cac:PostalAddress)",
    "message": "[ibr-019]-The Seller tax representative postal address (ibg-12) MUST be provided in the Invoice, if the Seller (ibg-04) has a Seller tax representative party (ibg-11).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-056",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "exists(cac:PartyTaxScheme/cbc:CompanyID)",
    "message": "[ibr-056]-The Seller tax representative party (ibg-11) MUST have a Seller tax representative Tax identifier (ibt-063).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-22",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "(count(cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-sr-22]-Seller tax representative name (ibt-062) MUST occur maximum once, if the Seller has a tax representative",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-23",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty",
    "test": "(count(cac:Party/cac:PartyTaxScheme/cbc:CompanyID) <= 1)",
    "message": "[ibr-sr-23]-Seller tax representative tax identifier (ibt-063) MUST occur maximum once, if the Seller has a tax representative",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-020",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty/cac:PostalAddress",
    "test": "normalize-space(cac:Country/cbc:IdentificationCode) != ''",
    "message": "[ibr-020]-The Seller tax representative postal address (ibg-12) MUST contain a Tax representative country code (ibt-069), if the Seller (ibg-04) has a Seller tax representative party (ibg-11).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-55",
    "flag": "fatal",
    "context": "cac:TaxRepresentativeParty/cac:PostalAddress",
    "test": "(count(cac:AddressLine/cbc:Line) <= 1)",
    "message": "[ibr-sr-55]-The Tax Representative Postal Address Line (ibt-164) MUST occur maximum once",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-124",
    "flag": "fatal",
    "context": "/ubl:Invoice/cac:TaxTotal | /cn:CreditNote/cac:Taxtotal",
    "test": "string-length(substring-after(cbc:TaxAmount, '.')) <= 2",
    "message": "[ibr-124]-Invoice total TAX amount (ibt-110) MUST have no more than 2 decimals.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-co-14",
    "flag": "fatal",
    "context": "/ubl:Invoice/cac:TaxTotal | /cn:CreditNote/cac:Taxtotal",
    "test": "(xs:decimal(child::cbc:TaxAmount)= round((sum(cac:TaxSubtotal/xs:decimal(cbc:TaxAmount)) * 10 * 10)) div 100) or not(cac:TaxSubtotal)",
    "message": "[ibr-co-14]-Invoice total Tax amount (ibt-110) =  Tax category tax amount (ibt-117).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-32",
    "flag": "fatal",
    "context": "//cac:TaxSubtotal",
    "test": "(count(cac:TaxCategory/cbc:TaxExemptionReason) <= 1)",
    "message": "[ibr-sr-32]-VAT exemption reason text (ibt-120) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-57",
    "flag": "fatal",
    "context": "//cac:PartyTaxScheme",
    "test": "exists(cbc:CompanyID)",
    "message": "[ibr-sr-57]-Company identifier MUST exist in the party tax scheme class.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-073",
    "flag": "fatal",
    "context": "cbc:IssueDate | cbc:DueDate | cbc:TaxPointDate | cbc:StartDate | cbc:EndDate | cbc:ActualDeliveryDate",
    "test": "string-length(text()) = 10 and (string(.) castable as xs:date)",
    "message": "[ibr-073]-A date MUST be formatted YYYY-MM-DD in (ibt-002), (ibt-007), (ibt-009), (ibt-026), (ibt-072), (ibt-073), (ibt-074), (ibt-134), (ibt-135).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-119",
    "flag": "fatal",
    "context": "//*[namespace-uri()='urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2' and ends-with(local-name(), 'Time')]",
    "test": "(string(.) castable as xs:time)",
    "message": "[ibr-119]-A time MUST be formatted hh:mm:ss with optional fractional seconds .sss and time zone expression (ibt-168).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-074",
    "flag": "fatal",
    "context": "//*[ends-with(name(), 'BinaryObject')]",
    "test": "(@mimeCode)",
    "message": "[ibr-074]-Binary object elements (ibt-125) MUST contain the mime code attribute (ibt-125-1).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-075",
    "flag": "fatal",
    "context": "//*[ends-with(name(), 'BinaryObject')]",
    "test": "(@filename)",
    "message": "[ibr-075]-Binary object elements (ibt-125) MUST contain the filename attribute (ibt-125-2).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-077",
    "flag": "fatal",
    "context": "cbc:TaxCurrencyCode",
    "test": "not(normalize-space(text()) = normalize-space(../cbc:DocumentCurrencyCode/text()))",
    "message": "[ibr-077]-Tax accounting currency code (ibt-006) MUST be different from invoice currency code (ibt-005) when provided.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-079",
    "flag": "fatal",
    "context": "//*[not(*) and not(normalize-space())]",
    "test": "false()",
    "message": "[ibr-079]-Document MUST not contain empty elements.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-088",
    "flag": "fatal",
    "context": "cac:Price/cbc:BaseQuantity[@unitCode]",
    "test": "not(../../cbc:InvoicedQuantity or ../../cbc:CreditedQuantity) or (@unitCode = ../../cbc:InvoicedQuantity/@unitCode) or (@unitCode = ../../cbc:CreditedQuantity/@unitCode)",
    "message": "[ibr-088]-Unit code of price base quantity (ibt-150) MUST be same as invoiced quantity (ibt-130).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-092",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:DespatchLineReference/cac:DocumentReference/cbc:ID | cac:CreditNoteLine/cac:DespatchLineReference/cac:DocumentReference/cbc:ID",
    "test": "count(//cac:DespatchDocumentReference) = 0",
    "message": "[ibr-092]-If despatch advice reference exists on line (ibt-184) then there MUST not be despatch reference on document level (ibt-016).",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-sr-62",
    "flag": "fatal",
    "context": "cac:InvoiceLine/cac:DespatchLineReference | cac:CreditNoteLine/cac:DespatchLineReference",
    "test": "(count(cac:DocumentReference) <= 1)",
    "message": "[ibr-sr-62]-Despatch advice line reference (ibt-184) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-093",
    "flag": "fatal",
    "context": "cac:PrepaidPayment[1]",
    "test": "exists(../cac:LegalMonetaryTotal/cbc:PrepaidAmount)",
    "message": "[ibr-093]-If there is a paid amount (ibt-180) then total paid amount (ibt-113) MUST exist.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  },
  {
    "id": "ibr-108",
    "flag": "fatal",
    "context": "cac:Delivery",
    "test": "(count(cac:DeliveryParty/cac:PartyName/cbc:Name) <= 1)",
    "message": "[ibr-108]-Deliver to party name (ibt-070) MUST occur maximum once.",
    "references": [],
    "documentType": "invoice",
    "packType": "ubl-preprocessed",
    "sourceFile": "trn-invoice/schematron/PINT-UBL-validation-preprocessed.sch"
  }
] as const;
